2026-01-19 14:30:35.536 +07:00  DBG  Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-19 14:30:35.751 +07:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-19 14:30:35.831 +07:00  INF  User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-19 14:30:36.258 +07:00  DBG  The index {'EmployeeId'} was not created on entity type 'EmployeeAttendance' as the properties are already covered by the index {'EmployeeId', 'WorkDate'}.
2026-01-19 14:30:36.260 +07:00  DBG  The index {'UserId'} was not created on entity type 'AppUserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2026-01-19 14:30:36.262 +07:00  DBG  The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2026-01-19 14:30:36.491 +07:00  DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 14:30:36.538 +07:00  DBG  Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2026-01-19 14:30:36.715 +07:00  DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<bool>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        bool? value1;
        value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
        return (bool)value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .Single()'
2026-01-19 14:30:36.746 +07:00  DBG  Creating DbConnection.
2026-01-19 14:30:36.762 +07:00  DBG  Created DbConnection. (14ms).
2026-01-19 14:30:36.767 +07:00  DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:36.984 +07:00  DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:36.988 +07:00  DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:30:36.994 +07:00  DBG  Created DbCommand for 'ExecuteReader' (4ms).
2026-01-19 14:30:36.997 +07:00  DBG  Initialized DbCommand for 'ExecuteReader' (9ms).
2026-01-19 14:30:37.003 +07:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 14:30:37.027 +07:00  INF  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 14:30:37.038 +07:00  DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:37.045 +07:00  DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 10ms reading results.
2026-01-19 14:30:37.048 +07:00  DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:37.054 +07:00  DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (5ms).
2026-01-19 14:30:37.058 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 14:30:37.060 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:37.062 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 14:30:37.067 +07:00  DBG  Hosting starting
2026-01-19 14:30:37.086 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-3a3f5ba7-96ca-43ee-aa50-0baf947a8e30.xml'.
2026-01-19 14:30:37.090 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8600f587-dc07-4d5b-bb2d-6f3e09633935.xml'.
2026-01-19 14:30:37.093 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8ded6968-7296-406f-847b-09157786742c.xml'.
2026-01-19 14:30:37.095 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bcbbd09c-5d11-4ea7-a210-5a7b4541efa2.xml'.
2026-01-19 14:30:37.096 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1.xml'.
2026-01-19 14:30:37.098 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-e60ff1e8-9769-4c99-9c41-530a7dbb1337.xml'.
2026-01-19 14:30:37.102 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-f5e67d02-4c24-4201-b8e7-897e61f0ba09.xml'.
2026-01-19 14:30:37.107 +07:00  DBG  Found key {3a3f5ba7-96ca-43ee-aa50-0baf947a8e30}.
2026-01-19 14:30:37.110 +07:00  DBG  Found key {8600f587-dc07-4d5b-bb2d-6f3e09633935}.
2026-01-19 14:30:37.112 +07:00  DBG  Found key {8ded6968-7296-406f-847b-09157786742c}.
2026-01-19 14:30:37.113 +07:00  DBG  Found key {bcbbd09c-5d11-4ea7-a210-5a7b4541efa2}.
2026-01-19 14:30:37.116 +07:00  DBG  Found key {bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1}.
2026-01-19 14:30:37.117 +07:00  DBG  Found key {e60ff1e8-9769-4c99-9c41-530a7dbb1337}.
2026-01-19 14:30:37.118 +07:00  DBG  Found key {f5e67d02-4c24-4201-b8e7-897e61f0ba09}.
2026-01-19 14:30:37.124 +07:00  DBG  Considering key {8ded6968-7296-406f-847b-09157786742c} with expiration date 2026-04-16 02:40:32Z as default key.
2026-01-19 14:30:37.130 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 14:30:37.134 +07:00  DBG  Decrypting secret element using Windows DPAPI.
2026-01-19 14:30:37.136 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 14:30:37.139 +07:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-19 14:30:37.143 +07:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-19 14:30:37.148 +07:00  DBG  Using key {8ded6968-7296-406f-847b-09157786742c} as the default key.
2026-01-19 14:30:37.150 +07:00  DBG  Key ring with default key {8ded6968-7296-406f-847b-09157786742c} was loaded during application startup.
2026-01-19 14:30:37.155 +07:00  DBG  Middleware loaded
2026-01-19 14:30:37.157 +07:00  DBG  Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16509 B).
2026-01-19 14:30:37.159 +07:00  DBG  Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-19 14:30:37.199 +07:00  WRN  The WebRootPath was not found: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\wwwroot. Static files may be unavailable.
2026-01-19 14:30:37.233 +07:00  DBG  Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-19 14:30:37.276 +07:00  INF  Now listening on: http://[::]:5501
2026-01-19 14:30:37.277 +07:00  DBG  Loaded hosting startup assembly API-Employee
2026-01-19 14:30:37.279 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-19 14:30:37.280 +07:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-19 14:30:37.281 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-19 14:30:37.387 +07:00  DBG  Connection id "0HNIN5IHV2MEK" accepted.
2026-01-19 14:30:37.389 +07:00  DBG  Connection id "0HNIN5IHV2MEK" started.
2026-01-19 14:30:37.391 +07:00  INF  Application started. Press Ctrl+C to shut down.
2026-01-19 14:30:37.392 +07:00  INF  Hosting environment: Development
2026-01-19 14:30:37.397 +07:00  INF  Content root path: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee
2026-01-19 14:30:37.399 +07:00  DBG  Hosting started
2026-01-19 14:30:37.433 +07:00  DBG  Connection id "0HNIN5IHV2MEL" received FIN.
2026-01-19 14:30:37.433 +07:00  DBG  Connection id "0HNIN5IHV2MEK" received FIN.
2026-01-19 14:30:37.437 +07:00  DBG  Connection id "0HNIN5IHV2MEL" accepted.
2026-01-19 14:30:37.443 +07:00  DBG  Connection id "0HNIN5IHV2MEL" started.
2026-01-19 14:30:37.442 +07:00  DBG  Connection id "0HNIN5IHV2MEK" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 14:30:37.447 +07:00  DBG  Connection id "0HNIN5IHV2MEL" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 14:30:37.450 +07:00  DBG  Connection id "0HNIN5IHV2MEK" disconnecting.
2026-01-19 14:30:37.450 +07:00  DBG  Connection id "0HNIN5IHV2MEL" disconnecting.
2026-01-19 14:30:37.457 +07:00  DBG  Connection id "0HNIN5IHV2MEK" stopped.
2026-01-19 14:30:37.458 +07:00  DBG  Connection id "0HNIN5IHV2MEL" stopped.
2026-01-19 14:30:37.600 +07:00  DBG  Connection id "0HNIN5IHV2MEM" accepted.
2026-01-19 14:30:37.602 +07:00  DBG  Connection id "0HNIN5IHV2MEM" started.
2026-01-19 14:30:37.603 +07:00  DBG  Connection id "0HNIN5IHV2MEN" accepted.
2026-01-19 14:30:37.610 +07:00  DBG  Connection id "0HNIN5IHV2MEN" started.
2026-01-19 14:30:37.642 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/index.html - null null
2026-01-19 14:30:37.725 +07:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2026-01-19 14:30:37.762 +07:00 3f7c35ec-99ae-4408-b94a-1b5397d02ff6 DBG  No candidates found for the request path '/swagger/index.html'
2026-01-19 14:30:37.764 +07:00 3f7c35ec-99ae-4408-b94a-1b5397d02ff6 DBG  Request did not match any endpoints
2026-01-19 14:30:37.768 +07:00 3f7c35ec-99ae-4408-b94a-1b5397d02ff6 WRN  Failed to determine the https port for redirect.
2026-01-19 14:30:37.837 +07:00 3f7c35ec-99ae-4408-b94a-1b5397d02ff6 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:30:37.845 +07:00 3f7c35ec-99ae-4408-b94a-1b5397d02ff6 DBG  The request path /swagger/index.html does not match an existing file
2026-01-19 14:30:37.894 +07:00 3f7c35ec-99ae-4408-b94a-1b5397d02ff6 DBG  Response markup is scheduled to include Browser Link script injection.
2026-01-19 14:30:37.896 +07:00 3f7c35ec-99ae-4408-b94a-1b5397d02ff6 DBG  Response markup is scheduled to include browser refresh script injection.
2026-01-19 14:30:37.910 +07:00  DBG  Response markup was updated to include Browser Link script injection.
2026-01-19 14:30:37.912 +07:00  DBG  Response markup was updated to include browser refresh script injection.
2026-01-19 14:30:37.914 +07:00  DBG  Connection id "0HNIN5IHV2MEM" completed keep alive response.
2026-01-19 14:30:37.917 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_vs/browserLink - null null
2026-01-19 14:30:37.918 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/index.html - 200 null text/html;charset=utf-8 283.8567ms
2026-01-19 14:30:37.929 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - null null
2026-01-19 14:30:37.934 +07:00  DBG  Script injected: /_framework/aspnetcore-browser-refresh.js
2026-01-19 14:30:37.937 +07:00  DBG  Connection id "0HNIN5IHV2MEM" completed keep alive response.
2026-01-19 14:30:37.939 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 10.5094ms
2026-01-19 14:30:37.952 +07:00  DBG  Connection id "0HNIN5IHV2MEN" completed keep alive response.
2026-01-19 14:30:37.955 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.7289ms
2026-01-19 14:30:38.017 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - null null
2026-01-19 14:30:38.020 +07:00 c61574db-8f12-40d2-8336-62ba5771e989 DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2026-01-19 14:30:38.022 +07:00 c61574db-8f12-40d2-8336-62ba5771e989 DBG  Request did not match any endpoints
2026-01-19 14:30:38.026 +07:00 c61574db-8f12-40d2-8336-62ba5771e989 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:30:38.032 +07:00 c61574db-8f12-40d2-8336-62ba5771e989 DBG  The request path /swagger/v1/swagger.json does not match an existing file
2026-01-19 14:30:38.097 +07:00  DBG  Connection id "0HNIN5IHV2MEN" completed keep alive response.
2026-01-19 14:30:38.099 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 81.934ms
2026-01-19 14:30:51.256 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - application/json 57
2026-01-19 14:30:51.273 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  1 candidate(s) found for the request path '/api/v1/Auth/sign-in'
2026-01-19 14:30:51.276 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)' with route pattern 'api/v{v:apiVersion}/Auth/sign-in' is valid for the request path '/api/v1/Auth/sign-in'
2026-01-19 14:30:51.284 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:30:51.288 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 14:30:51.289 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 INF  CORS policy execution successful.
2026-01-19 14:30:51.294 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:30:51.296 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 14:30:51.297 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 14:30:51.299 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:30:51.320 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 INF  Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Application.CQRS.Commands.Auth.SignIn.SignInCommand) on controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee).
2026-01-19 14:30:51.324 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 14:30:51.327 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 14:30:51.329 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 14:30:51.331 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 14:30:51.333 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 14:30:51.337 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 14:30:51.341 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 WRN  You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-01-19 14:30:51.346 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 14:30:51.351 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 14:30:51.354 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' using the name '' in request data ...
2026-01-19 14:30:51.359 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 14:30:51.368 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Connection id "0HNIN5IHV2MEN", Request id "0HNIN5IHV2MEN:00000003": started reading request body.
2026-01-19 14:30:51.371 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Connection id "0HNIN5IHV2MEN", Request id "0HNIN5IHV2MEN:00000003": done reading request body.
2026-01-19 14:30:51.382 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'
2026-01-19 14:30:51.385 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:30:51.386 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:30:51.388 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 14:30:51.394 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:30:51.424 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 INF  CQRS Handling SignInCommand | Payload: {"Username":"tanh@624","Password":"tanh@123456","$type":"SignInCommand"}
2026-01-19 14:30:51.486 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 14:30:51.499 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2026-01-19 14:30:51.559 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: AppUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Identity.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]: 
                            {
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<DateBirth>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<FirstName>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<LastName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(10) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(10);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(15);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(17);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(18) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(18);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.DatabaseContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-19 14:30:51.600 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Creating DbConnection.
2026-01-19 14:30:51.602 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Created DbConnection. (1ms).
2026-01-19 14:30:51.605 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:51.609 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:51.610 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:30:51.612 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 14:30:51.616 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-19 14:30:51.620 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 14:30:51.652 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 INF  Executed DbCommand (34ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 14:30:51.666 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:51.668 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 10ms reading results.
2026-01-19 14:30:51.671 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:51.673 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (2ms).
2026-01-19 14:30:51.744 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 ERR  CQRS Error in SignInCommand after 321ms
Application.Exceptions.UnauthorizedException: Invalid credentials
   at Application.CQRS.Commands.Auth.SignIn.SignInHandler.Handle(SignInCommand request, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\CQRS\Commands\Auth\SignIn\SignInHandler.cs:line 32
   at Application.Behavior.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\LoggingBehavior.cs:line 34
2026-01-19 14:30:51.833 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 INF  Executed action API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee) in 495.0854ms
2026-01-19 14:30:51.836 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:30:51.908 +07:00 4357c187-698a-4f8b-8502-c715cf2aa9e1 WRN  Handled exception at /api/v1/Auth/sign-in StatusCode 401 Message Invalid credentials
2026-01-19 14:30:51.916 +07:00  DBG  Connection id "0HNIN5IHV2MEN" completed keep alive response.
2026-01-19 14:30:51.919 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 14:30:51.922 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:51.925 +07:00  DBG  Disposed connection to database '' on server '' (2ms).
2026-01-19 14:30:51.927 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - 401 null application/json 671.0713ms
2026-01-19 14:30:59.092 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - application/json 56
2026-01-19 14:30:59.096 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  1 candidate(s) found for the request path '/api/v1/Auth/sign-in'
2026-01-19 14:30:59.097 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)' with route pattern 'api/v{v:apiVersion}/Auth/sign-in' is valid for the request path '/api/v1/Auth/sign-in'
2026-01-19 14:30:59.099 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:30:59.102 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 14:30:59.103 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 INF  CORS policy execution successful.
2026-01-19 14:30:59.104 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:30:59.106 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 14:30:59.107 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 14:30:59.107 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:30:59.109 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 INF  Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Application.CQRS.Commands.Auth.SignIn.SignInCommand) on controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee).
2026-01-19 14:30:59.110 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 14:30:59.112 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 14:30:59.114 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 14:30:59.116 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 14:30:59.117 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 14:30:59.119 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 14:30:59.124 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 14:30:59.126 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 14:30:59.127 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' using the name '' in request data ...
2026-01-19 14:30:59.129 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 14:30:59.131 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Connection id "0HNIN5IHV2MEN", Request id "0HNIN5IHV2MEN:00000004": started reading request body.
2026-01-19 14:30:59.132 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Connection id "0HNIN5IHV2MEN", Request id "0HNIN5IHV2MEN:00000004": done reading request body.
2026-01-19 14:30:59.134 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'
2026-01-19 14:30:59.135 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:30:59.138 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:30:59.141 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 14:30:59.142 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:30:59.145 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 INF  CQRS Handling SignInCommand | Payload: {"Username":"tanh624","Password":"tanh@123456","$type":"SignInCommand"}
2026-01-19 14:30:59.158 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 14:30:59.166 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Creating DbConnection.
2026-01-19 14:30:59.168 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Created DbConnection. (2ms).
2026-01-19 14:30:59.170 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:59.171 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:59.172 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:30:59.173 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 14:30:59.175 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2026-01-19 14:30:59.177 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 14:30:59.186 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 INF  Executed DbCommand (9ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 14:30:59.218 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Context 'DatabaseContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 14:30:59.267 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:59.268 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 78ms reading results.
2026-01-19 14:30:59.270 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:59.271 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 14:30:59.355 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Compiling query expression: 
'DbSet<AppUserRole>()
    .Join(
        inner: DbSet<AppRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2026-01-19 14:30:59.391 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-19 14:30:59.399 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:59.401 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:59.402 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:30:59.403 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 14:30:59.404 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 14:30:59.406 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 14:30:59.409 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 INF  Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 14:30:59.417 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:59.418 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 2ms reading results.
2026-01-19 14:30:59.421 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:59.423 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 14:30:59.508 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 ERR  CQRS Error in SignInCommand after 362ms
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Shared.Helpers.JwtHelper.GenerateToken(IEnumerable`1 roles, JwtSetting jwtSetting, JwtUserInformation user, DateTime expireStart) in D:\C# .Net Core\Project\Employee\API-Employee\Shared\Helpers\JwtHelper.cs:line 17
   at Application.Services.TokenService.GenerateAsync(AppUser user) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Services\TokenService.cs:line 36
   at Application.CQRS.Commands.Auth.SignIn.SignInHandler.Handle(SignInCommand request, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\CQRS\Commands\Auth\SignIn\SignInHandler.cs:line 39
   at Application.Behavior.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\LoggingBehavior.cs:line 34
2026-01-19 14:30:59.623 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 INF  Executed action API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee) in 503.4074ms
2026-01-19 14:30:59.625 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:30:59.682 +07:00 37144f3d-8e45-44ec-bd39-b3e401d42802 ERR  Unhandled exception at /api/v1/Auth/sign-in
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Shared.Helpers.JwtHelper.GenerateToken(IEnumerable`1 roles, JwtSetting jwtSetting, JwtUserInformation user, DateTime expireStart) in D:\C# .Net Core\Project\Employee\API-Employee\Shared\Helpers\JwtHelper.cs:line 17
   at Application.Services.TokenService.GenerateAsync(AppUser user) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Services\TokenService.cs:line 36
   at Application.CQRS.Commands.Auth.SignIn.SignInHandler.Handle(SignInCommand request, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\CQRS\Commands\Auth\SignIn\SignInHandler.cs:line 39
   at Application.Behavior.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\LoggingBehavior.cs:line 34
   at Application.Behavior.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\ValidationBehavior.cs:line 44
   at API_Employee.Controllers.V1.Auth.AuthController.SignIn(SignInCommand command) in D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\Controllers\V1\Auth\AuthController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at API_Blog.Configurations.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\Configurations\ExceptionHandlingMiddleware.cs:line 29
2026-01-19 14:30:59.707 +07:00  DBG  Connection id "0HNIN5IHV2MEN" completed keep alive response.
2026-01-19 14:30:59.708 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 14:30:59.709 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:30:59.711 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 14:30:59.714 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - 500 null application/json 622.5654ms
2026-01-19 14:37:26.511 +07:00  DBG  Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-19 14:37:26.733 +07:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-19 14:37:26.816 +07:00  INF  User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-19 14:37:27.189 +07:00  DBG  The index {'EmployeeId'} was not created on entity type 'EmployeeAttendance' as the properties are already covered by the index {'EmployeeId', 'WorkDate'}.
2026-01-19 14:37:27.192 +07:00  DBG  The index {'UserId'} was not created on entity type 'AppUserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2026-01-19 14:37:27.193 +07:00  DBG  The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2026-01-19 14:37:27.407 +07:00  DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 14:37:27.451 +07:00  DBG  Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2026-01-19 14:37:27.632 +07:00  DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<bool>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        bool? value1;
        value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
        return (bool)value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .Single()'
2026-01-19 14:37:27.664 +07:00  DBG  Creating DbConnection.
2026-01-19 14:37:27.680 +07:00  DBG  Created DbConnection. (13ms).
2026-01-19 14:37:27.684 +07:00  DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:27.915 +07:00  DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:27.919 +07:00  DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:37:27.926 +07:00  DBG  Created DbCommand for 'ExecuteReader' (4ms).
2026-01-19 14:37:27.930 +07:00  DBG  Initialized DbCommand for 'ExecuteReader' (11ms).
2026-01-19 14:37:27.937 +07:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 14:37:27.969 +07:00  INF  Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 14:37:27.981 +07:00  DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:27.997 +07:00  DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 15ms reading results.
2026-01-19 14:37:28.001 +07:00  DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:28.005 +07:00  DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (4ms).
2026-01-19 14:37:28.009 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 14:37:28.011 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:28.014 +07:00  DBG  Disposed connection to database '' on server '' (3ms).
2026-01-19 14:37:28.019 +07:00  DBG  Hosting starting
2026-01-19 14:37:28.027 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-3a3f5ba7-96ca-43ee-aa50-0baf947a8e30.xml'.
2026-01-19 14:37:28.032 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8600f587-dc07-4d5b-bb2d-6f3e09633935.xml'.
2026-01-19 14:37:28.034 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8ded6968-7296-406f-847b-09157786742c.xml'.
2026-01-19 14:37:28.036 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bcbbd09c-5d11-4ea7-a210-5a7b4541efa2.xml'.
2026-01-19 14:37:28.037 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1.xml'.
2026-01-19 14:37:28.038 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-e60ff1e8-9769-4c99-9c41-530a7dbb1337.xml'.
2026-01-19 14:37:28.040 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-f5e67d02-4c24-4201-b8e7-897e61f0ba09.xml'.
2026-01-19 14:37:28.045 +07:00  DBG  Found key {3a3f5ba7-96ca-43ee-aa50-0baf947a8e30}.
2026-01-19 14:37:28.050 +07:00  DBG  Found key {8600f587-dc07-4d5b-bb2d-6f3e09633935}.
2026-01-19 14:37:28.051 +07:00  DBG  Found key {8ded6968-7296-406f-847b-09157786742c}.
2026-01-19 14:37:28.052 +07:00  DBG  Found key {bcbbd09c-5d11-4ea7-a210-5a7b4541efa2}.
2026-01-19 14:37:28.054 +07:00  DBG  Found key {bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1}.
2026-01-19 14:37:28.055 +07:00  DBG  Found key {e60ff1e8-9769-4c99-9c41-530a7dbb1337}.
2026-01-19 14:37:28.056 +07:00  DBG  Found key {f5e67d02-4c24-4201-b8e7-897e61f0ba09}.
2026-01-19 14:37:28.063 +07:00  DBG  Considering key {8ded6968-7296-406f-847b-09157786742c} with expiration date 2026-04-16 02:40:32Z as default key.
2026-01-19 14:37:28.068 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 14:37:28.070 +07:00  DBG  Decrypting secret element using Windows DPAPI.
2026-01-19 14:37:28.073 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 14:37:28.075 +07:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-19 14:37:28.079 +07:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-19 14:37:28.083 +07:00  DBG  Using key {8ded6968-7296-406f-847b-09157786742c} as the default key.
2026-01-19 14:37:28.084 +07:00  DBG  Key ring with default key {8ded6968-7296-406f-847b-09157786742c} was loaded during application startup.
2026-01-19 14:37:28.090 +07:00  DBG  Middleware loaded
2026-01-19 14:37:28.094 +07:00  DBG  Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16509 B).
2026-01-19 14:37:28.097 +07:00  DBG  Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-19 14:37:28.133 +07:00  WRN  The WebRootPath was not found: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\wwwroot. Static files may be unavailable.
2026-01-19 14:37:28.168 +07:00  DBG  Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-19 14:37:28.212 +07:00  INF  Now listening on: http://[::]:5501
2026-01-19 14:37:28.213 +07:00  DBG  Loaded hosting startup assembly API-Employee
2026-01-19 14:37:28.216 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-19 14:37:28.217 +07:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-19 14:37:28.218 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-19 14:37:28.326 +07:00  INF  Application started. Press Ctrl+C to shut down.
2026-01-19 14:37:28.327 +07:00  INF  Hosting environment: Development
2026-01-19 14:37:28.329 +07:00  INF  Content root path: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee
2026-01-19 14:37:28.330 +07:00  DBG  Hosting started
2026-01-19 14:37:28.461 +07:00  DBG  Connection id "0HNIN5MCFCGQE" accepted.
2026-01-19 14:37:28.463 +07:00  DBG  Connection id "0HNIN5MCFCGQE" started.
2026-01-19 14:37:28.476 +07:00  DBG  Connection id "0HNIN5MCFCGQF" received FIN.
2026-01-19 14:37:28.476 +07:00  DBG  Connection id "0HNIN5MCFCGQE" received FIN.
2026-01-19 14:37:28.479 +07:00  DBG  Connection id "0HNIN5MCFCGQF" accepted.
2026-01-19 14:37:28.487 +07:00  DBG  Connection id "0HNIN5MCFCGQF" started.
2026-01-19 14:37:28.488 +07:00  DBG  Connection id "0HNIN5MCFCGQE" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 14:37:28.489 +07:00  DBG  Connection id "0HNIN5MCFCGQF" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 14:37:28.492 +07:00  DBG  Connection id "0HNIN5MCFCGQE" disconnecting.
2026-01-19 14:37:28.493 +07:00  DBG  Connection id "0HNIN5MCFCGQF" disconnecting.
2026-01-19 14:37:28.504 +07:00  DBG  Connection id "0HNIN5MCFCGQF" stopped.
2026-01-19 14:37:28.504 +07:00  DBG  Connection id "0HNIN5MCFCGQE" stopped.
2026-01-19 14:37:28.624 +07:00  DBG  Connection id "0HNIN5MCFCGQG" accepted.
2026-01-19 14:37:28.626 +07:00  DBG  Connection id "0HNIN5MCFCGQG" started.
2026-01-19 14:37:28.627 +07:00  DBG  Connection id "0HNIN5MCFCGQH" accepted.
2026-01-19 14:37:28.633 +07:00  DBG  Connection id "0HNIN5MCFCGQH" started.
2026-01-19 14:37:28.664 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/index.html - null null
2026-01-19 14:37:28.787 +07:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2026-01-19 14:37:28.822 +07:00 42b6623c-21da-4322-9a35-56925402a426 DBG  No candidates found for the request path '/swagger/index.html'
2026-01-19 14:37:28.825 +07:00 42b6623c-21da-4322-9a35-56925402a426 DBG  Request did not match any endpoints
2026-01-19 14:37:28.828 +07:00 42b6623c-21da-4322-9a35-56925402a426 WRN  Failed to determine the https port for redirect.
2026-01-19 14:37:28.884 +07:00 42b6623c-21da-4322-9a35-56925402a426 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:37:28.892 +07:00 42b6623c-21da-4322-9a35-56925402a426 DBG  The request path /swagger/index.html does not match an existing file
2026-01-19 14:37:28.940 +07:00 42b6623c-21da-4322-9a35-56925402a426 DBG  Response markup is scheduled to include Browser Link script injection.
2026-01-19 14:37:28.944 +07:00 42b6623c-21da-4322-9a35-56925402a426 DBG  Response markup is scheduled to include browser refresh script injection.
2026-01-19 14:37:28.957 +07:00  DBG  Response markup was updated to include Browser Link script injection.
2026-01-19 14:37:28.959 +07:00  DBG  Response markup was updated to include browser refresh script injection.
2026-01-19 14:37:28.963 +07:00  DBG  Connection id "0HNIN5MCFCGQG" completed keep alive response.
2026-01-19 14:37:28.964 +07:00  DBG  Connection id "0HNIN5MCFCGQI" accepted.
2026-01-19 14:37:28.964 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - null null
2026-01-19 14:37:28.966 +07:00  DBG  Connection id "0HNIN5MCFCGQI" started.
2026-01-19 14:37:28.968 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/index.html - 200 null text/html;charset=utf-8 312.0817ms
2026-01-19 14:37:28.972 +07:00  DBG  Script injected: /_framework/aspnetcore-browser-refresh.js
2026-01-19 14:37:28.979 +07:00  DBG  Connection id "0HNIN5MCFCGQH" completed keep alive response.
2026-01-19 14:37:28.979 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_vs/browserLink - null null
2026-01-19 14:37:28.980 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 15.772ms
2026-01-19 14:37:29.021 +07:00  DBG  Connection id "0HNIN5MCFCGQG" completed keep alive response.
2026-01-19 14:37:29.022 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.7276ms
2026-01-19 14:37:29.070 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - null null
2026-01-19 14:37:29.073 +07:00 c4a8744f-e0a1-4d14-9647-bec1f426cd89 DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2026-01-19 14:37:29.074 +07:00 c4a8744f-e0a1-4d14-9647-bec1f426cd89 DBG  Request did not match any endpoints
2026-01-19 14:37:29.077 +07:00 c4a8744f-e0a1-4d14-9647-bec1f426cd89 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:37:29.078 +07:00 c4a8744f-e0a1-4d14-9647-bec1f426cd89 DBG  The request path /swagger/v1/swagger.json does not match an existing file
2026-01-19 14:37:29.122 +07:00  DBG  Connection id "0HNIN5MCFCGQG" completed keep alive response.
2026-01-19 14:37:29.125 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 55.3548ms
2026-01-19 14:37:40.871 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - application/json 56
2026-01-19 14:37:40.891 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  1 candidate(s) found for the request path '/api/v1/Auth/sign-in'
2026-01-19 14:37:40.893 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)' with route pattern 'api/v{v:apiVersion}/Auth/sign-in' is valid for the request path '/api/v1/Auth/sign-in'
2026-01-19 14:37:40.899 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:37:40.903 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 14:37:40.905 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 INF  CORS policy execution successful.
2026-01-19 14:37:40.909 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:37:40.910 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 14:37:40.911 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 14:37:40.913 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:37:40.933 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 INF  Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Application.CQRS.Commands.Auth.SignIn.SignInCommand) on controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee).
2026-01-19 14:37:40.939 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 14:37:40.940 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 14:37:40.942 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 14:37:40.945 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 14:37:40.947 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 14:37:40.950 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 14:37:40.957 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 WRN  You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-01-19 14:37:40.959 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 14:37:40.965 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 14:37:40.970 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' using the name '' in request data ...
2026-01-19 14:37:40.973 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 14:37:40.982 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Connection id "0HNIN5MCFCGQG", Request id "0HNIN5MCFCGQG:00000004": started reading request body.
2026-01-19 14:37:40.986 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Connection id "0HNIN5MCFCGQG", Request id "0HNIN5MCFCGQG:00000004": done reading request body.
2026-01-19 14:37:40.996 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'
2026-01-19 14:37:41.000 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:37:41.002 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:37:41.004 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 14:37:41.008 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:37:41.039 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 INF  CQRS Handling SignInCommand | Payload: {"Username":"tanh624","Password":"tanh@123456","$type":"SignInCommand"}
2026-01-19 14:37:41.099 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 14:37:41.112 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2026-01-19 14:37:41.171 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: AppUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Identity.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]: 
                            {
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<DateBirth>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<FirstName>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<LastName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(10) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(10);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(15);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(17);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(18) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(18);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.DatabaseContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-19 14:37:41.212 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Creating DbConnection.
2026-01-19 14:37:41.214 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Created DbConnection. (2ms).
2026-01-19 14:37:41.217 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:41.221 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:41.223 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:37:41.224 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 14:37:41.228 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-19 14:37:41.234 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 14:37:41.267 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 INF  Executed DbCommand (35ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 14:37:41.302 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Context 'DatabaseContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 14:37:41.364 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:41.367 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 94ms reading results.
2026-01-19 14:37:41.370 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:41.372 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (2ms).
2026-01-19 14:37:41.455 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Compiling query expression: 
'DbSet<AppUserRole>()
    .Join(
        inner: DbSet<AppRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2026-01-19 14:37:41.489 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-19 14:37:41.498 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:41.499 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:41.501 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:37:41.502 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 14:37:41.504 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 14:37:41.505 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 14:37:41.513 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 INF  Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 14:37:41.516 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:41.517 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 1ms reading results.
2026-01-19 14:37:41.519 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:41.521 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 14:37:41.623 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 ERR  CQRS Error in SignInCommand after 585ms
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Shared.Helpers.JwtHelper.GenerateToken(IEnumerable`1 roles, JwtSetting jwtSetting, JwtUserInformation user, DateTime expireStart) in D:\C# .Net Core\Project\Employee\API-Employee\Shared\Helpers\JwtHelper.cs:line 17
   at Application.Services.TokenService.GenerateAsync(AppUser user) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Services\TokenService.cs:line 36
   at Application.CQRS.Commands.Auth.SignIn.SignInHandler.Handle(SignInCommand request, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\CQRS\Commands\Auth\SignIn\SignInHandler.cs:line 39
   at Application.Behavior.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\LoggingBehavior.cs:line 34
2026-01-19 14:37:41.735 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 INF  Executed action API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee) in 783.5533ms
2026-01-19 14:37:41.737 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:37:41.816 +07:00 e0dfbeaf-f6cb-4882-8175-7d55be717da0 ERR  Unhandled exception at /api/v1/Auth/sign-in
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Shared.Helpers.JwtHelper.GenerateToken(IEnumerable`1 roles, JwtSetting jwtSetting, JwtUserInformation user, DateTime expireStart) in D:\C# .Net Core\Project\Employee\API-Employee\Shared\Helpers\JwtHelper.cs:line 17
   at Application.Services.TokenService.GenerateAsync(AppUser user) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Services\TokenService.cs:line 36
   at Application.CQRS.Commands.Auth.SignIn.SignInHandler.Handle(SignInCommand request, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\CQRS\Commands\Auth\SignIn\SignInHandler.cs:line 39
   at Application.Behavior.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\LoggingBehavior.cs:line 34
   at Application.Behavior.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\ValidationBehavior.cs:line 44
   at API_Employee.Controllers.V1.Auth.AuthController.SignIn(SignInCommand command) in D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\Controllers\V1\Auth\AuthController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at API_Blog.Configurations.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\Configurations\ExceptionHandlingMiddleware.cs:line 29
2026-01-19 14:37:41.853 +07:00  DBG  Connection id "0HNIN5MCFCGQG" completed keep alive response.
2026-01-19 14:37:41.856 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 14:37:41.859 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:37:41.861 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 14:37:41.863 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - 500 null application/json 991.1697ms
2026-01-19 14:46:25.532 +07:00  DBG  Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-19 14:46:25.754 +07:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-19 14:46:25.827 +07:00  INF  User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-19 14:46:26.301 +07:00  DBG  The index {'EmployeeId'} was not created on entity type 'EmployeeAttendance' as the properties are already covered by the index {'EmployeeId', 'WorkDate'}.
2026-01-19 14:46:26.303 +07:00  DBG  The index {'UserId'} was not created on entity type 'AppUserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2026-01-19 14:46:26.306 +07:00  DBG  The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2026-01-19 14:46:26.584 +07:00  DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 14:46:26.628 +07:00  DBG  Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2026-01-19 14:46:26.854 +07:00  DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<bool>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        bool? value1;
        value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
        return (bool)value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .Single()'
2026-01-19 14:46:26.887 +07:00  DBG  Creating DbConnection.
2026-01-19 14:46:26.903 +07:00  DBG  Created DbConnection. (13ms).
2026-01-19 14:46:26.907 +07:00  DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:46:27.121 +07:00  DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:46:27.124 +07:00  DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:46:27.130 +07:00  DBG  Created DbCommand for 'ExecuteReader' (4ms).
2026-01-19 14:46:27.133 +07:00  DBG  Initialized DbCommand for 'ExecuteReader' (9ms).
2026-01-19 14:46:27.139 +07:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 14:46:27.163 +07:00  INF  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 14:46:27.173 +07:00  DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:46:27.180 +07:00  DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 10ms reading results.
2026-01-19 14:46:27.184 +07:00  DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:46:27.194 +07:00  DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (6ms).
2026-01-19 14:46:27.201 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 14:46:27.204 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:46:27.206 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 14:46:27.211 +07:00  DBG  Hosting starting
2026-01-19 14:46:27.219 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-3a3f5ba7-96ca-43ee-aa50-0baf947a8e30.xml'.
2026-01-19 14:46:27.223 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8600f587-dc07-4d5b-bb2d-6f3e09633935.xml'.
2026-01-19 14:46:27.225 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8ded6968-7296-406f-847b-09157786742c.xml'.
2026-01-19 14:46:27.227 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bcbbd09c-5d11-4ea7-a210-5a7b4541efa2.xml'.
2026-01-19 14:46:27.228 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1.xml'.
2026-01-19 14:46:27.230 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-e60ff1e8-9769-4c99-9c41-530a7dbb1337.xml'.
2026-01-19 14:46:27.231 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-f5e67d02-4c24-4201-b8e7-897e61f0ba09.xml'.
2026-01-19 14:46:27.237 +07:00  DBG  Found key {3a3f5ba7-96ca-43ee-aa50-0baf947a8e30}.
2026-01-19 14:46:27.241 +07:00  DBG  Found key {8600f587-dc07-4d5b-bb2d-6f3e09633935}.
2026-01-19 14:46:27.243 +07:00  DBG  Found key {8ded6968-7296-406f-847b-09157786742c}.
2026-01-19 14:46:27.244 +07:00  DBG  Found key {bcbbd09c-5d11-4ea7-a210-5a7b4541efa2}.
2026-01-19 14:46:27.245 +07:00  DBG  Found key {bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1}.
2026-01-19 14:46:27.246 +07:00  DBG  Found key {e60ff1e8-9769-4c99-9c41-530a7dbb1337}.
2026-01-19 14:46:27.247 +07:00  DBG  Found key {f5e67d02-4c24-4201-b8e7-897e61f0ba09}.
2026-01-19 14:46:27.253 +07:00  DBG  Considering key {8ded6968-7296-406f-847b-09157786742c} with expiration date 2026-04-16 02:40:32Z as default key.
2026-01-19 14:46:27.258 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 14:46:27.260 +07:00  DBG  Decrypting secret element using Windows DPAPI.
2026-01-19 14:46:27.263 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 14:46:27.266 +07:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-19 14:46:27.270 +07:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-19 14:46:27.274 +07:00  DBG  Using key {8ded6968-7296-406f-847b-09157786742c} as the default key.
2026-01-19 14:46:27.276 +07:00  DBG  Key ring with default key {8ded6968-7296-406f-847b-09157786742c} was loaded during application startup.
2026-01-19 14:46:27.283 +07:00  DBG  Middleware loaded
2026-01-19 14:46:27.285 +07:00  DBG  Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16509 B).
2026-01-19 14:46:27.287 +07:00  DBG  Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-19 14:46:27.330 +07:00  WRN  The WebRootPath was not found: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\wwwroot. Static files may be unavailable.
2026-01-19 14:46:27.360 +07:00  DBG  Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-19 14:46:27.401 +07:00  INF  Now listening on: http://[::]:5501
2026-01-19 14:46:27.403 +07:00  DBG  Loaded hosting startup assembly API-Employee
2026-01-19 14:46:27.404 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-19 14:46:27.404 +07:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-19 14:46:27.405 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-19 14:46:27.555 +07:00  INF  Application started. Press Ctrl+C to shut down.
2026-01-19 14:46:27.556 +07:00  INF  Hosting environment: Development
2026-01-19 14:46:27.557 +07:00  INF  Content root path: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee
2026-01-19 14:46:27.558 +07:00  DBG  Hosting started
2026-01-19 14:46:27.691 +07:00  DBG  Connection id "0HNIN5RD5SH1H" accepted.
2026-01-19 14:46:27.703 +07:00  DBG  Connection id "0HNIN5RD5SH1H" started.
2026-01-19 14:46:27.720 +07:00  DBG  Connection id "0HNIN5RD5SH1H" received FIN.
2026-01-19 14:46:27.720 +07:00  DBG  Connection id "0HNIN5RD5SH1I" received FIN.
2026-01-19 14:46:27.725 +07:00  DBG  Connection id "0HNIN5RD5SH1I" accepted.
2026-01-19 14:46:27.727 +07:00  DBG  Connection id "0HNIN5RD5SH1I" started.
2026-01-19 14:46:27.732 +07:00  DBG  Connection id "0HNIN5RD5SH1I" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 14:46:27.732 +07:00  DBG  Connection id "0HNIN5RD5SH1H" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 14:46:27.739 +07:00  DBG  Connection id "0HNIN5RD5SH1I" disconnecting.
2026-01-19 14:46:27.740 +07:00  DBG  Connection id "0HNIN5RD5SH1H" disconnecting.
2026-01-19 14:46:27.751 +07:00  DBG  Connection id "0HNIN5RD5SH1I" stopped.
2026-01-19 14:46:27.751 +07:00  DBG  Connection id "0HNIN5RD5SH1H" stopped.
2026-01-19 14:46:27.897 +07:00  DBG  Connection id "0HNIN5RD5SH1J" accepted.
2026-01-19 14:46:27.898 +07:00  DBG  Connection id "0HNIN5RD5SH1J" started.
2026-01-19 14:46:27.899 +07:00  DBG  Connection id "0HNIN5RD5SH1K" accepted.
2026-01-19 14:46:27.901 +07:00  DBG  Connection id "0HNIN5RD5SH1K" started.
2026-01-19 14:46:27.945 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/index.html - null null
2026-01-19 14:46:28.038 +07:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2026-01-19 14:46:28.080 +07:00 819061fc-aa65-4b35-83b8-327a21075fcf DBG  No candidates found for the request path '/swagger/index.html'
2026-01-19 14:46:28.083 +07:00 819061fc-aa65-4b35-83b8-327a21075fcf DBG  Request did not match any endpoints
2026-01-19 14:46:28.086 +07:00 819061fc-aa65-4b35-83b8-327a21075fcf WRN  Failed to determine the https port for redirect.
2026-01-19 14:46:28.143 +07:00 819061fc-aa65-4b35-83b8-327a21075fcf DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:46:28.153 +07:00 819061fc-aa65-4b35-83b8-327a21075fcf DBG  The request path /swagger/index.html does not match an existing file
2026-01-19 14:46:28.215 +07:00 819061fc-aa65-4b35-83b8-327a21075fcf DBG  Response markup is scheduled to include Browser Link script injection.
2026-01-19 14:46:28.217 +07:00 819061fc-aa65-4b35-83b8-327a21075fcf DBG  Response markup is scheduled to include browser refresh script injection.
2026-01-19 14:46:28.229 +07:00  DBG  Response markup was updated to include Browser Link script injection.
2026-01-19 14:46:28.231 +07:00  DBG  Response markup was updated to include browser refresh script injection.
2026-01-19 14:46:28.234 +07:00  DBG  Connection id "0HNIN5RD5SH1J" completed keep alive response.
2026-01-19 14:46:28.234 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - null null
2026-01-19 14:46:28.239 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/index.html - 200 null text/html;charset=utf-8 306.0485ms
2026-01-19 14:46:28.241 +07:00  DBG  Script injected: /_framework/aspnetcore-browser-refresh.js
2026-01-19 14:46:28.244 +07:00  DBG  Connection id "0HNIN5RD5SH1K" completed keep alive response.
2026-01-19 14:46:28.244 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_vs/browserLink - null null
2026-01-19 14:46:28.246 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 11.5944ms
2026-01-19 14:46:28.276 +07:00  DBG  Connection id "0HNIN5RD5SH1J" completed keep alive response.
2026-01-19 14:46:28.278 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.4028ms
2026-01-19 14:46:28.310 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - null null
2026-01-19 14:46:28.312 +07:00 7e60090d-64fa-4fad-a522-6649aee8c180 DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2026-01-19 14:46:28.313 +07:00 7e60090d-64fa-4fad-a522-6649aee8c180 DBG  Request did not match any endpoints
2026-01-19 14:46:28.316 +07:00 7e60090d-64fa-4fad-a522-6649aee8c180 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:46:28.318 +07:00 7e60090d-64fa-4fad-a522-6649aee8c180 DBG  The request path /swagger/v1/swagger.json does not match an existing file
2026-01-19 14:46:28.367 +07:00  DBG  Connection id "0HNIN5RD5SH1J" completed keep alive response.
2026-01-19 14:46:28.369 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 59.6673ms
2026-01-19 14:50:15.609 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - application/json 56
2026-01-19 14:50:15.652 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  1 candidate(s) found for the request path '/api/v1/Auth/sign-in'
2026-01-19 14:50:15.655 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)' with route pattern 'api/v{v:apiVersion}/Auth/sign-in' is valid for the request path '/api/v1/Auth/sign-in'
2026-01-19 14:50:15.661 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:50:15.664 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 14:50:15.666 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 INF  CORS policy execution successful.
2026-01-19 14:50:15.669 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 14:50:15.671 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 14:50:15.672 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 14:50:15.673 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:50:15.695 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 INF  Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Application.CQRS.Commands.Auth.SignIn.SignInCommand) on controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee).
2026-01-19 14:50:15.699 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 14:50:15.701 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 14:50:15.703 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 14:50:15.706 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 14:50:15.708 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 14:50:15.711 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 14:50:15.715 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 WRN  You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-01-19 14:50:15.717 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 14:50:15.722 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 14:50:15.726 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' using the name '' in request data ...
2026-01-19 14:50:15.730 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 14:50:15.739 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Connection id "0HNIN5RD5SH1J", Request id "0HNIN5RD5SH1J:00000004": started reading request body.
2026-01-19 14:50:15.741 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Connection id "0HNIN5RD5SH1J", Request id "0HNIN5RD5SH1J:00000004": done reading request body.
2026-01-19 14:50:15.754 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'
2026-01-19 14:50:15.756 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:50:15.758 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:50:15.760 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 14:50:15.764 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 14:50:15.797 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 INF  CQRS Handling SignInCommand | Payload: {"Username":"tanh624","Password":"tanh@123456","$type":"SignInCommand"}
2026-01-19 14:50:15.863 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 14:50:15.876 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2026-01-19 14:50:15.941 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: AppUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Identity.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]: 
                            {
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<DateBirth>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<FirstName>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<LastName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(10) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(10);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(15);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(17);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(18) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(18);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.DatabaseContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-19 14:50:15.971 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Creating DbConnection.
2026-01-19 14:50:15.973 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Created DbConnection. (1ms).
2026-01-19 14:50:15.975 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:50:15.979 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:50:15.981 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:50:15.982 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 14:50:15.986 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-19 14:50:15.991 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 14:50:16.020 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 INF  Executed DbCommand (31ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 14:50:16.052 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Context 'DatabaseContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 14:50:16.097 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:50:16.100 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 77ms reading results.
2026-01-19 14:50:16.105 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:50:16.108 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (3ms).
2026-01-19 14:50:16.192 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Compiling query expression: 
'DbSet<AppUserRole>()
    .Join(
        inner: DbSet<AppRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2026-01-19 14:50:16.224 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-19 14:50:16.229 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:50:16.231 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:50:16.232 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 14:50:16.233 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 14:50:16.234 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 14:50:16.236 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 14:50:16.243 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 INF  Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 14:50:16.246 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:50:16.247 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 1ms reading results.
2026-01-19 14:50:16.249 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:50:16.250 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (0ms).
2026-01-19 14:50:16.361 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 ERR  CQRS Error in SignInCommand after 565ms
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Shared.Helpers.JwtHelper.GenerateToken(IEnumerable`1 roles, JwtSetting jwtSetting, JwtUserInformation user, DateTime expireStart) in D:\C# .Net Core\Project\Employee\API-Employee\Shared\Helpers\JwtHelper.cs:line 17
   at Application.Services.TokenService.GenerateAsync(AppUser user) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Services\TokenService.cs:line 36
   at Application.CQRS.Commands.Auth.SignIn.SignInHandler.Handle(SignInCommand request, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\CQRS\Commands\Auth\SignIn\SignInHandler.cs:line 39
   at Application.Behavior.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\LoggingBehavior.cs:line 34
2026-01-19 14:50:16.483 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 INF  Executed action API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee) in 770.2591ms
2026-01-19 14:50:16.486 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 14:50:16.566 +07:00 f11252cb-547c-483e-a6a6-f86cd35ea0a1 ERR  Unhandled exception at /api/v1/Auth/sign-in
System.ArgumentNullException: Value cannot be null. (Parameter 'value')
   at System.ArgumentNullException.Throw(String paramName)
   at System.ArgumentNullException.ThrowIfNull(Object argument, String paramName)
   at System.Security.Claims.Claim..ctor(String type, String value, String valueType, String issuer, String originalIssuer, ClaimsIdentity subject, String propertyKey, String propertyValue)
   at System.Security.Claims.Claim..ctor(String type, String value)
   at Shared.Helpers.JwtHelper.GenerateToken(IEnumerable`1 roles, JwtSetting jwtSetting, JwtUserInformation user, DateTime expireStart) in D:\C# .Net Core\Project\Employee\API-Employee\Shared\Helpers\JwtHelper.cs:line 17
   at Application.Services.TokenService.GenerateAsync(AppUser user) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Services\TokenService.cs:line 36
   at Application.CQRS.Commands.Auth.SignIn.SignInHandler.Handle(SignInCommand request, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\CQRS\Commands\Auth\SignIn\SignInHandler.cs:line 39
   at Application.Behavior.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\LoggingBehavior.cs:line 34
   at Application.Behavior.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\ValidationBehavior.cs:line 44
   at API_Employee.Controllers.V1.Auth.AuthController.SignIn(SignInCommand command) in D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\Controllers\V1\Auth\AuthController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at API_Blog.Configurations.ExceptionHandlingMiddleware.Invoke(HttpContext httpContext) in D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\Configurations\ExceptionHandlingMiddleware.cs:line 29
2026-01-19 14:50:16.584 +07:00  DBG  Connection id "0HNIN5RD5SH1J" completed keep alive response.
2026-01-19 14:50:16.586 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 14:50:16.589 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 14:50:16.591 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 14:50:16.593 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - 500 null application/json 983.7972ms
2026-01-19 15:00:41.749 +07:00  DBG  Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-19 15:00:41.954 +07:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-19 15:00:42.048 +07:00  INF  User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-19 15:00:42.423 +07:00  DBG  The index {'EmployeeId'} was not created on entity type 'EmployeeAttendance' as the properties are already covered by the index {'EmployeeId', 'WorkDate'}.
2026-01-19 15:00:42.425 +07:00  DBG  The index {'UserId'} was not created on entity type 'AppUserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2026-01-19 15:00:42.426 +07:00  DBG  The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2026-01-19 15:00:42.628 +07:00  DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:00:42.673 +07:00  DBG  Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2026-01-19 15:00:42.856 +07:00  DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<bool>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        bool? value1;
        value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
        return (bool)value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .Single()'
2026-01-19 15:00:42.888 +07:00  DBG  Creating DbConnection.
2026-01-19 15:00:42.903 +07:00  DBG  Created DbConnection. (13ms).
2026-01-19 15:00:42.907 +07:00  DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:43.083 +07:00  DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:43.089 +07:00  DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:00:43.098 +07:00  DBG  Created DbCommand for 'ExecuteReader' (6ms).
2026-01-19 15:00:43.101 +07:00  DBG  Initialized DbCommand for 'ExecuteReader' (14ms).
2026-01-19 15:00:43.110 +07:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 15:00:43.139 +07:00  INF  Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 15:00:43.149 +07:00  DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:43.156 +07:00  DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 9ms reading results.
2026-01-19 15:00:43.159 +07:00  DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:43.163 +07:00  DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (4ms).
2026-01-19 15:00:43.166 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:00:43.168 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:43.170 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:00:43.175 +07:00  DBG  Hosting starting
2026-01-19 15:00:43.183 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-3a3f5ba7-96ca-43ee-aa50-0baf947a8e30.xml'.
2026-01-19 15:00:43.187 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8600f587-dc07-4d5b-bb2d-6f3e09633935.xml'.
2026-01-19 15:00:43.189 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8ded6968-7296-406f-847b-09157786742c.xml'.
2026-01-19 15:00:43.190 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bcbbd09c-5d11-4ea7-a210-5a7b4541efa2.xml'.
2026-01-19 15:00:43.192 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1.xml'.
2026-01-19 15:00:43.193 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-e60ff1e8-9769-4c99-9c41-530a7dbb1337.xml'.
2026-01-19 15:00:43.194 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-f5e67d02-4c24-4201-b8e7-897e61f0ba09.xml'.
2026-01-19 15:00:43.198 +07:00  DBG  Found key {3a3f5ba7-96ca-43ee-aa50-0baf947a8e30}.
2026-01-19 15:00:43.203 +07:00  DBG  Found key {8600f587-dc07-4d5b-bb2d-6f3e09633935}.
2026-01-19 15:00:43.203 +07:00  DBG  Found key {8ded6968-7296-406f-847b-09157786742c}.
2026-01-19 15:00:43.205 +07:00  DBG  Found key {bcbbd09c-5d11-4ea7-a210-5a7b4541efa2}.
2026-01-19 15:00:43.206 +07:00  DBG  Found key {bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1}.
2026-01-19 15:00:43.207 +07:00  DBG  Found key {e60ff1e8-9769-4c99-9c41-530a7dbb1337}.
2026-01-19 15:00:43.208 +07:00  DBG  Found key {f5e67d02-4c24-4201-b8e7-897e61f0ba09}.
2026-01-19 15:00:43.214 +07:00  DBG  Considering key {8ded6968-7296-406f-847b-09157786742c} with expiration date 2026-04-16 02:40:32Z as default key.
2026-01-19 15:00:43.220 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 15:00:43.221 +07:00  DBG  Decrypting secret element using Windows DPAPI.
2026-01-19 15:00:43.224 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 15:00:43.226 +07:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-19 15:00:43.229 +07:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-19 15:00:43.233 +07:00  DBG  Using key {8ded6968-7296-406f-847b-09157786742c} as the default key.
2026-01-19 15:00:43.235 +07:00  DBG  Key ring with default key {8ded6968-7296-406f-847b-09157786742c} was loaded during application startup.
2026-01-19 15:00:43.240 +07:00  DBG  Middleware loaded
2026-01-19 15:00:43.243 +07:00  DBG  Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16509 B).
2026-01-19 15:00:43.244 +07:00  DBG  Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-19 15:00:43.280 +07:00  WRN  The WebRootPath was not found: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\wwwroot. Static files may be unavailable.
2026-01-19 15:00:43.316 +07:00  DBG  Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-19 15:00:43.358 +07:00  INF  Now listening on: http://[::]:5501
2026-01-19 15:00:43.359 +07:00  DBG  Loaded hosting startup assembly API-Employee
2026-01-19 15:00:43.360 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-19 15:00:43.361 +07:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-19 15:00:43.362 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-19 15:00:43.468 +07:00  INF  Application started. Press Ctrl+C to shut down.
2026-01-19 15:00:43.470 +07:00  INF  Hosting environment: Development
2026-01-19 15:00:43.471 +07:00  INF  Content root path: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee
2026-01-19 15:00:43.472 +07:00  DBG  Hosting started
2026-01-19 15:00:43.637 +07:00  DBG  Connection id "0HNIN63C8QHA2" received FIN.
2026-01-19 15:00:43.647 +07:00  DBG  Connection id "0HNIN63C8QHA2" accepted.
2026-01-19 15:00:43.650 +07:00  DBG  Connection id "0HNIN63C8QHA2" started.
2026-01-19 15:00:43.658 +07:00  DBG  Connection id "0HNIN63C8QHA2" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 15:00:43.663 +07:00  DBG  Connection id "0HNIN63C8QHA2" disconnecting.
2026-01-19 15:00:43.668 +07:00  DBG  Connection id "0HNIN63C8QHA2" stopped.
2026-01-19 15:00:43.791 +07:00  DBG  Connection id "0HNIN63C8QHA3" accepted.
2026-01-19 15:00:43.792 +07:00  DBG  Connection id "0HNIN63C8QHA3" started.
2026-01-19 15:00:43.793 +07:00  DBG  Connection id "0HNIN63C8QHA4" accepted.
2026-01-19 15:00:43.795 +07:00  DBG  Connection id "0HNIN63C8QHA4" started.
2026-01-19 15:00:43.835 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/index.html - null null
2026-01-19 15:00:43.916 +07:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2026-01-19 15:00:43.949 +07:00 03fcebcb-e9f6-473f-b981-dd0b06ce0c1c DBG  No candidates found for the request path '/swagger/index.html'
2026-01-19 15:00:43.953 +07:00 03fcebcb-e9f6-473f-b981-dd0b06ce0c1c DBG  Request did not match any endpoints
2026-01-19 15:00:43.956 +07:00 03fcebcb-e9f6-473f-b981-dd0b06ce0c1c WRN  Failed to determine the https port for redirect.
2026-01-19 15:00:44.012 +07:00 03fcebcb-e9f6-473f-b981-dd0b06ce0c1c DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:00:44.021 +07:00 03fcebcb-e9f6-473f-b981-dd0b06ce0c1c DBG  The request path /swagger/index.html does not match an existing file
2026-01-19 15:00:44.068 +07:00 03fcebcb-e9f6-473f-b981-dd0b06ce0c1c DBG  Response markup is scheduled to include Browser Link script injection.
2026-01-19 15:00:44.070 +07:00 03fcebcb-e9f6-473f-b981-dd0b06ce0c1c DBG  Response markup is scheduled to include browser refresh script injection.
2026-01-19 15:00:44.083 +07:00  DBG  Response markup was updated to include Browser Link script injection.
2026-01-19 15:00:44.085 +07:00  DBG  Response markup was updated to include browser refresh script injection.
2026-01-19 15:00:44.088 +07:00  DBG  Connection id "0HNIN63C8QHA3" completed keep alive response.
2026-01-19 15:00:44.089 +07:00  DBG  Connection id "0HNIN63C8QHA5" accepted.
2026-01-19 15:00:44.119 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_vs/browserLink - null null
2026-01-19 15:00:44.119 +07:00  DBG  Connection id "0HNIN63C8QHA5" started.
2026-01-19 15:00:44.121 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/index.html - 200 null text/html;charset=utf-8 294.8629ms
2026-01-19 15:00:44.129 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - null null
2026-01-19 15:00:44.134 +07:00  DBG  Script injected: /_framework/aspnetcore-browser-refresh.js
2026-01-19 15:00:44.135 +07:00  DBG  Connection id "0HNIN63C8QHA3" completed keep alive response.
2026-01-19 15:00:44.136 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 7.0795ms
2026-01-19 15:00:44.147 +07:00  DBG  Connection id "0HNIN63C8QHA4" completed keep alive response.
2026-01-19 15:00:44.148 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.1478ms
2026-01-19 15:00:44.197 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - null null
2026-01-19 15:00:44.199 +07:00 08648d22-bb5f-4890-bb6e-be8acbd68dc4 DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2026-01-19 15:00:44.200 +07:00 08648d22-bb5f-4890-bb6e-be8acbd68dc4 DBG  Request did not match any endpoints
2026-01-19 15:00:44.202 +07:00 08648d22-bb5f-4890-bb6e-be8acbd68dc4 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:00:44.203 +07:00 08648d22-bb5f-4890-bb6e-be8acbd68dc4 DBG  The request path /swagger/v1/swagger.json does not match an existing file
2026-01-19 15:00:44.244 +07:00  DBG  Connection id "0HNIN63C8QHA4" completed keep alive response.
2026-01-19 15:00:44.245 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 48.6057ms
2026-01-19 15:00:58.077 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - application/json 56
2026-01-19 15:00:58.090 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  1 candidate(s) found for the request path '/api/v1/Auth/sign-in'
2026-01-19 15:00:58.093 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)' with route pattern 'api/v{v:apiVersion}/Auth/sign-in' is valid for the request path '/api/v1/Auth/sign-in'
2026-01-19 15:00:58.098 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 15:00:58.101 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 15:00:58.102 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  CORS policy execution successful.
2026-01-19 15:00:58.106 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:00:58.107 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:00:58.108 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:00:58.110 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 15:00:58.131 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Application.CQRS.Commands.Auth.SignIn.SignInCommand) on controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee).
2026-01-19 15:00:58.135 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 15:00:58.137 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 15:00:58.140 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:00:58.142 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 15:00:58.143 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:00:58.147 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 15:00:58.150 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 WRN  You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-01-19 15:00:58.153 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 15:00:58.158 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 15:00:58.162 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' using the name '' in request data ...
2026-01-19 15:00:58.166 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 15:00:58.175 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Connection id "0HNIN63C8QHA4", Request id "0HNIN63C8QHA4:00000003": started reading request body.
2026-01-19 15:00:58.176 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Connection id "0HNIN63C8QHA4", Request id "0HNIN63C8QHA4:00000003": done reading request body.
2026-01-19 15:00:58.188 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'
2026-01-19 15:00:58.190 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 15:00:58.191 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 15:00:58.192 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 15:00:58.196 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 15:00:58.224 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  CQRS Handling SignInCommand | Payload: {"Username":"tanh624","Password":"tanh@123456","$type":"SignInCommand"}
2026-01-19 15:00:58.282 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:00:58.295 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2026-01-19 15:00:58.353 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: AppUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Identity.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]: 
                            {
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<DateBirth>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<FirstName>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<LastName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(10) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(10);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(15);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(17);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(18) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(18);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.DatabaseContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-19 15:00:58.382 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Creating DbConnection.
2026-01-19 15:00:58.384 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Created DbConnection. (1ms).
2026-01-19 15:00:58.387 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:58.391 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:58.394 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:00:58.395 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:00:58.398 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Initialized DbCommand for 'ExecuteReader' (4ms).
2026-01-19 15:00:58.403 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 15:00:58.436 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  Executed DbCommand (35ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 15:00:58.473 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Context 'DatabaseContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:00:58.523 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:58.526 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 86ms reading results.
2026-01-19 15:00:58.529 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:58.530 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:00:58.613 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Compiling query expression: 
'DbSet<AppUserRole>()
    .Join(
        inner: DbSet<AppRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2026-01-19 15:00:58.648 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-19 15:00:58.655 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:58.657 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:58.658 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:00:58.659 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:00:58.660 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 15:00:58.662 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 15:00:58.668 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 15:00:58.671 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:58.672 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 1ms reading results.
2026-01-19 15:00:58.674 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:58.675 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:00:58.749 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  CQRS Handled SignInCommand in 527ms
2026-01-19 15:00:58.757 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-19 15:00:58.762 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-01-19 15:00:58.765 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-01-19 15:00:58.766 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-19 15:00:58.767 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-19 15:00:58.769 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-19 15:00:58.772 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  Executing OkObjectResult, writing value of type 'Application.Common.ApiResult`1[[Application.CQRS.DTOs.Auth.SignInDTO, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-19 15:00:58.785 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  Executed action API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee) in 637.7564ms
2026-01-19 15:00:58.789 +07:00 4974cbad-28cf-4306-a51a-f193cbeffa39 INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 15:00:58.791 +07:00  DBG  Connection id "0HNIN63C8QHA4" completed keep alive response.
2026-01-19 15:00:58.793 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:00:58.795 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:00:58.797 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:00:58.799 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - 200 null application/json; charset=utf-8 721.956ms
2026-01-19 15:02:00.210 +07:00  DBG  Connection id "0HNIN63C8QHA5" received FIN.
2026-01-19 15:02:00.211 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Token/refresh - application/json 520
2026-01-19 15:02:00.213 +07:00  DBG  Connection id "0HNIN63C8QHA5" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 15:02:00.225 +07:00  DBG  Connection id "0HNIN63C8QHA5" disconnecting.
2026-01-19 15:02:00.225 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  1 candidate(s) found for the request path '/api/v1/Token/refresh'
2026-01-19 15:02:00.231 +07:00  DBG  Connection id "0HNIN63C8QHA5" stopped.
2026-01-19 15:02:00.232 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)' with route pattern 'api/v{v:apiVersion}/Token/refresh' is valid for the request path '/api/v1/Token/refresh'
2026-01-19 15:02:00.235 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)'
2026-01-19 15:02:00.236 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 15:02:00.237 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 INF  CORS policy execution successful.
2026-01-19 15:02:00.238 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:02:00.238 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:02:00.239 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:02:00.240 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)'
2026-01-19 15:02:00.245 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 INF  Route matched with {action = "RefreshToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand) on controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee).
2026-01-19 15:02:00.249 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 15:02:00.250 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 15:02:00.251 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:02:00.253 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 15:02:00.255 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:02:00.257 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:02:00.258 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:02:00.260 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand' ...
2026-01-19 15:02:00.261 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand' using the name '' in request data ...
2026-01-19 15:02:00.263 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 15:02:00.266 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Connection id "0HNIN63C8QHA4", Request id "0HNIN63C8QHA4:00000004": started reading request body.
2026-01-19 15:02:00.267 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Connection id "0HNIN63C8QHA4", Request id "0HNIN63C8QHA4:00000004": done reading request body.
2026-01-19 15:02:00.268 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'
2026-01-19 15:02:00.270 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'.
2026-01-19 15:02:00.271 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'.
2026-01-19 15:02:00.272 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand' ...
2026-01-19 15:02:00.274 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'.
2026-01-19 15:02:00.278 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 INF  CQRS Handling RefreshTokenCommand | Payload: {"AccessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlNzY2ZjJkZi05MDkyLTQ2OWItM2Y3MC0wOGRlNTcyYmNiNDQiLCJuYW1lIjoidGFuaDYyNCIsInVuaXF1ZV9uYW1lIjoidGFuaDYyNCIsImVtYWlsIjoiYW5odHJhbmR1eTI1QGdtYWlsLmNvbSIsInJvbGUiOiJtZW1iZXIiLCJuYmYiOjE3Njg4MDk2NTgsImV4cCI6MTc2ODgzOTY1OCwiaWF0IjoxNzY4ODA5NjU4LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjU1MDEifQ.6ZEIJoEHu-4Jy5mQvDctJmJbYGRYLaBXy05cLcDOmsk","RefreshToken":"VQVMHVT7FVV14MO0RRR84E7DX1PMK2YNWJ3ZKQEMCEJ3FHUEB53GDNQ7AHOFGG0U","$type":"RefreshTokenCommand"}
2026-01-19 15:02:00.294 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:02:00.325 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Compiling query expression: 
'DbSet<UserRefreshToken>()
    .Where(x => x.AccessToken == __request_AccessToken_0 && x.RefreshToken == __request_RefreshToken_1 && !(x.IsRevoked) && !(x.IsUsed))
    .FirstOrDefault()'
2026-01-19 15:02:00.336 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserRefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE (((u.AccessToken == @__request_AccessToken_0) && (u.RefreshToken == @__request_RefreshToken_1)) && Not(u.IsRevoked)) && Not(u.IsUsed)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE (((u.AccessToken == @__request_AccessToken_0) && (u.RefreshToken == @__request_RefreshToken_1)) && Not(u.IsRevoked)) && Not(u.IsUsed), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserRefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserRefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserRefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserRefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserRefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]: 
                        {
                            return 
                            {
                                UserRefreshToken instance;
                                instance = new UserRefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<AccessToken>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(2) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(2);
                                instance.<ExpiryTime>k__BackingField = dataReader.GetDateTime(3);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(4);
                                instance.<IsUsed>k__BackingField = dataReader.GetBoolean(5);
                                instance.<RefreshToken>k__BackingField = dataReader.GetString(6);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(7) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(7);
                                instance.<UserId>k__BackingField = dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserRefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .SingleOrDefault()'
2026-01-19 15:02:00.350 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Creating DbConnection.
2026-01-19 15:02:00.351 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Created DbConnection. (0ms).
2026-01-19 15:02:00.352 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:02:00.353 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:02:00.354 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:02:00.355 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:02:00.356 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:02:00.358 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Executing DbCommand [Parameters=[@__request_AccessToken_0='?' (Size = 4000), @__request_RefreshToken_1='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[AccessToken] = @__request_AccessToken_0 AND [u].[RefreshToken] = @__request_RefreshToken_1 AND [u].[IsRevoked] = CAST(0 AS bit) AND [u].[IsUsed] = CAST(0 AS bit)
2026-01-19 15:02:00.364 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 INF  Executed DbCommand (6ms) [Parameters=[@__request_AccessToken_0='?' (Size = 4000), @__request_RefreshToken_1='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[AccessToken] = @__request_AccessToken_0 AND [u].[RefreshToken] = @__request_RefreshToken_1 AND [u].[IsRevoked] = CAST(0 AS bit) AND [u].[IsUsed] = CAST(0 AS bit)
2026-01-19 15:02:00.367 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:02:00.368 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 1ms reading results.
2026-01-19 15:02:00.369 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:02:00.370 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:02:00.461 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 ERR  CQRS Error in RefreshTokenCommand after 182ms
Application.Exceptions.UnauthorizedException: Invalid refresh token
   at Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenHandler.Handle(RefreshTokenCommand request, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\CQRS\Commands\Auth\RefreshToken\RefreshTokenHandler.cs:line 37
   at Application.Behavior.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\LoggingBehavior.cs:line 34
2026-01-19 15:02:00.548 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 INF  Executed action API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee) in 291.05ms
2026-01-19 15:02:00.549 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)'
2026-01-19 15:02:00.566 +07:00 40910ebc-ac1b-4e0d-8bc3-c0dc6c7e70b9 WRN  Handled exception at /api/v1/Token/refresh StatusCode 401 Message Invalid refresh token
2026-01-19 15:02:00.572 +07:00  DBG  Connection id "0HNIN63C8QHA4" completed keep alive response.
2026-01-19 15:02:00.573 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:02:00.574 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:02:00.576 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:02:00.577 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Token/refresh - 401 null application/json 366.2939ms
2026-01-19 15:14:44.212 +07:00  DBG  Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-19 15:14:44.424 +07:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-19 15:14:44.499 +07:00  INF  User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-19 15:14:44.863 +07:00  DBG  The index {'EmployeeId'} was not created on entity type 'EmployeeAttendance' as the properties are already covered by the index {'EmployeeId', 'WorkDate'}.
2026-01-19 15:14:44.865 +07:00  DBG  The index {'UserId'} was not created on entity type 'AppUserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2026-01-19 15:14:44.867 +07:00  DBG  The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2026-01-19 15:14:45.060 +07:00  DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:14:45.103 +07:00  DBG  Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2026-01-19 15:14:45.279 +07:00  DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<bool>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        bool? value1;
        value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
        return (bool)value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .Single()'
2026-01-19 15:14:45.308 +07:00  DBG  Creating DbConnection.
2026-01-19 15:14:45.324 +07:00  DBG  Created DbConnection. (14ms).
2026-01-19 15:14:45.328 +07:00  DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:14:45.554 +07:00  DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:14:45.558 +07:00  DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:14:45.564 +07:00  DBG  Created DbCommand for 'ExecuteReader' (3ms).
2026-01-19 15:14:45.567 +07:00  DBG  Initialized DbCommand for 'ExecuteReader' (9ms).
2026-01-19 15:14:45.573 +07:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 15:14:45.596 +07:00  INF  Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 15:14:45.607 +07:00  DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:14:45.614 +07:00  DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 9ms reading results.
2026-01-19 15:14:45.617 +07:00  DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:14:45.622 +07:00  DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (4ms).
2026-01-19 15:14:45.625 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:14:45.628 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:14:45.629 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:14:45.634 +07:00  DBG  Hosting starting
2026-01-19 15:14:45.642 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-3a3f5ba7-96ca-43ee-aa50-0baf947a8e30.xml'.
2026-01-19 15:14:45.646 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8600f587-dc07-4d5b-bb2d-6f3e09633935.xml'.
2026-01-19 15:14:45.648 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8ded6968-7296-406f-847b-09157786742c.xml'.
2026-01-19 15:14:45.649 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bcbbd09c-5d11-4ea7-a210-5a7b4541efa2.xml'.
2026-01-19 15:14:45.651 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1.xml'.
2026-01-19 15:14:45.652 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-e60ff1e8-9769-4c99-9c41-530a7dbb1337.xml'.
2026-01-19 15:14:45.653 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-f5e67d02-4c24-4201-b8e7-897e61f0ba09.xml'.
2026-01-19 15:14:45.658 +07:00  DBG  Found key {3a3f5ba7-96ca-43ee-aa50-0baf947a8e30}.
2026-01-19 15:14:45.662 +07:00  DBG  Found key {8600f587-dc07-4d5b-bb2d-6f3e09633935}.
2026-01-19 15:14:45.663 +07:00  DBG  Found key {8ded6968-7296-406f-847b-09157786742c}.
2026-01-19 15:14:45.664 +07:00  DBG  Found key {bcbbd09c-5d11-4ea7-a210-5a7b4541efa2}.
2026-01-19 15:14:45.665 +07:00  DBG  Found key {bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1}.
2026-01-19 15:14:45.666 +07:00  DBG  Found key {e60ff1e8-9769-4c99-9c41-530a7dbb1337}.
2026-01-19 15:14:45.667 +07:00  DBG  Found key {f5e67d02-4c24-4201-b8e7-897e61f0ba09}.
2026-01-19 15:14:45.673 +07:00  DBG  Considering key {8ded6968-7296-406f-847b-09157786742c} with expiration date 2026-04-16 02:40:32Z as default key.
2026-01-19 15:14:45.678 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 15:14:45.681 +07:00  DBG  Decrypting secret element using Windows DPAPI.
2026-01-19 15:14:45.683 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 15:14:45.685 +07:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-19 15:14:45.688 +07:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-19 15:14:45.691 +07:00  DBG  Using key {8ded6968-7296-406f-847b-09157786742c} as the default key.
2026-01-19 15:14:45.693 +07:00  DBG  Key ring with default key {8ded6968-7296-406f-847b-09157786742c} was loaded during application startup.
2026-01-19 15:14:45.700 +07:00  DBG  Middleware loaded
2026-01-19 15:14:45.702 +07:00  DBG  Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16509 B).
2026-01-19 15:14:45.704 +07:00  DBG  Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-19 15:14:45.741 +07:00  WRN  The WebRootPath was not found: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\wwwroot. Static files may be unavailable.
2026-01-19 15:14:45.770 +07:00  DBG  Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-19 15:14:45.812 +07:00  INF  Now listening on: http://[::]:5501
2026-01-19 15:14:45.814 +07:00  DBG  Loaded hosting startup assembly API-Employee
2026-01-19 15:14:45.815 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-19 15:14:45.816 +07:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-19 15:14:45.817 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-19 15:14:45.916 +07:00  INF  Application started. Press Ctrl+C to shut down.
2026-01-19 15:14:45.918 +07:00  INF  Hosting environment: Development
2026-01-19 15:14:45.919 +07:00  INF  Content root path: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee
2026-01-19 15:14:45.920 +07:00  DBG  Hosting started
2026-01-19 15:14:45.954 +07:00  DBG  Connection id "0HNIN6B79PCGJ" received FIN.
2026-01-19 15:14:45.965 +07:00  DBG  Connection id "0HNIN6B79PCGJ" accepted.
2026-01-19 15:14:45.970 +07:00  DBG  Connection id "0HNIN6B79PCGJ" started.
2026-01-19 15:14:45.999 +07:00  DBG  Connection id "0HNIN6B79PCGJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 15:14:46.008 +07:00  DBG  Connection id "0HNIN6B79PCGJ" disconnecting.
2026-01-19 15:14:46.019 +07:00  DBG  Connection id "0HNIN6B79PCGJ" stopped.
2026-01-19 15:14:46.188 +07:00  DBG  Connection id "0HNIN6B79PCGK" accepted.
2026-01-19 15:14:46.190 +07:00  DBG  Connection id "0HNIN6B79PCGK" started.
2026-01-19 15:14:46.191 +07:00  DBG  Connection id "0HNIN6B79PCGL" accepted.
2026-01-19 15:14:46.198 +07:00  DBG  Connection id "0HNIN6B79PCGL" started.
2026-01-19 15:14:46.230 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/index.html - null null
2026-01-19 15:14:46.312 +07:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2026-01-19 15:14:46.346 +07:00 0e40003b-5d42-47f7-ae45-d0f61f2d49ad DBG  No candidates found for the request path '/swagger/index.html'
2026-01-19 15:14:46.349 +07:00 0e40003b-5d42-47f7-ae45-d0f61f2d49ad DBG  Request did not match any endpoints
2026-01-19 15:14:46.352 +07:00 0e40003b-5d42-47f7-ae45-d0f61f2d49ad WRN  Failed to determine the https port for redirect.
2026-01-19 15:14:46.407 +07:00 0e40003b-5d42-47f7-ae45-d0f61f2d49ad DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:14:46.416 +07:00 0e40003b-5d42-47f7-ae45-d0f61f2d49ad DBG  The request path /swagger/index.html does not match an existing file
2026-01-19 15:14:46.463 +07:00 0e40003b-5d42-47f7-ae45-d0f61f2d49ad DBG  Response markup is scheduled to include Browser Link script injection.
2026-01-19 15:14:46.466 +07:00 0e40003b-5d42-47f7-ae45-d0f61f2d49ad DBG  Response markup is scheduled to include browser refresh script injection.
2026-01-19 15:14:46.478 +07:00  DBG  Response markup was updated to include Browser Link script injection.
2026-01-19 15:14:46.480 +07:00  DBG  Response markup was updated to include browser refresh script injection.
2026-01-19 15:14:46.482 +07:00  DBG  Connection id "0HNIN6B79PCGK" completed keep alive response.
2026-01-19 15:14:46.485 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - null null
2026-01-19 15:14:46.488 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/index.html - 200 null text/html;charset=utf-8 264.4901ms
2026-01-19 15:14:46.493 +07:00  DBG  Script injected: /_framework/aspnetcore-browser-refresh.js
2026-01-19 15:14:46.495 +07:00  DBG  Connection id "0HNIN6B79PCGL" completed keep alive response.
2026-01-19 15:14:46.495 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_vs/browserLink - null null
2026-01-19 15:14:46.497 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 11.9872ms
2026-01-19 15:14:46.530 +07:00  DBG  Connection id "0HNIN6B79PCGK" completed keep alive response.
2026-01-19 15:14:46.532 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.1276ms
2026-01-19 15:14:46.566 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - null null
2026-01-19 15:14:46.569 +07:00 13df6b68-e27c-406b-82d1-4cf5c6212f9c DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2026-01-19 15:14:46.570 +07:00 13df6b68-e27c-406b-82d1-4cf5c6212f9c DBG  Request did not match any endpoints
2026-01-19 15:14:46.572 +07:00 13df6b68-e27c-406b-82d1-4cf5c6212f9c DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:14:46.574 +07:00 13df6b68-e27c-406b-82d1-4cf5c6212f9c DBG  The request path /swagger/v1/swagger.json does not match an existing file
2026-01-19 15:14:46.627 +07:00  DBG  Connection id "0HNIN6B79PCGK" completed keep alive response.
2026-01-19 15:14:46.628 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 62.0503ms
2026-01-19 15:15:10.365 +07:00  DBG  Connection id "0HNIN6B79PCGK" received FIN.
2026-01-19 15:15:10.365 +07:00  DBG  Connection id "0HNIN6B79PCGL" received FIN.
2026-01-19 15:15:10.376 +07:00  DBG  Connection id "0HNIN6B79PCGK" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 15:15:10.382 +07:00  DBG  Connection id "0HNIN6B79PCGL" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 15:15:10.384 +07:00  DBG  Connection id "0HNIN6B79PCGK" disconnecting.
2026-01-19 15:15:10.390 +07:00  DBG  Connection id "0HNIN6B79PCGL" disconnecting.
2026-01-19 15:15:10.392 +07:00  DBG  Connection id "0HNIN6B79PCGK" stopped.
2026-01-19 15:15:10.403 +07:00  DBG  Connection id "0HNIN6B79PCGL" stopped.
2026-01-19 15:16:00.959 +07:00  DBG  Connection id "0HNIN6B79PCGM" accepted.
2026-01-19 15:16:00.962 +07:00  DBG  Connection id "0HNIN6B79PCGM" started.
2026-01-19 15:16:00.964 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - application/json 56
2026-01-19 15:16:00.980 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  1 candidate(s) found for the request path '/api/v1/Auth/sign-in'
2026-01-19 15:16:00.982 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)' with route pattern 'api/v{v:apiVersion}/Auth/sign-in' is valid for the request path '/api/v1/Auth/sign-in'
2026-01-19 15:16:00.988 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 15:16:00.991 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 15:16:00.993 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  CORS policy execution successful.
2026-01-19 15:16:00.997 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:16:00.999 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:16:01.000 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:16:01.003 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 15:16:01.024 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Application.CQRS.Commands.Auth.SignIn.SignInCommand) on controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee).
2026-01-19 15:16:01.029 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 15:16:01.030 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 15:16:01.032 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:16:01.034 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 15:16:01.036 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:16:01.040 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 15:16:01.044 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e WRN  You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-01-19 15:16:01.046 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 15:16:01.051 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 15:16:01.056 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' using the name '' in request data ...
2026-01-19 15:16:01.059 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 15:16:01.068 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Connection id "0HNIN6B79PCGM", Request id "0HNIN6B79PCGM:00000001": started reading request body.
2026-01-19 15:16:01.070 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Connection id "0HNIN6B79PCGM", Request id "0HNIN6B79PCGM:00000001": done reading request body.
2026-01-19 15:16:01.082 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'
2026-01-19 15:16:01.084 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 15:16:01.085 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 15:16:01.087 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 15:16:01.091 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 15:16:01.123 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  CQRS Handling SignInCommand | Payload: {"Username":"tanh624","Password":"tanh@123456","$type":"SignInCommand"}
2026-01-19 15:16:01.187 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:16:01.198 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2026-01-19 15:16:01.263 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: AppUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Identity.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]: 
                            {
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<DateBirth>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<FirstName>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<LastName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(10) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(10);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(15);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(17);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(18) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(18);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.DatabaseContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-19 15:16:01.293 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Creating DbConnection.
2026-01-19 15:16:01.294 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Created DbConnection. (1ms).
2026-01-19 15:16:01.296 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:01.300 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:01.301 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:16:01.302 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:16:01.305 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Initialized DbCommand for 'ExecuteReader' (4ms).
2026-01-19 15:16:01.309 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 15:16:01.339 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  Executed DbCommand (32ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 15:16:01.371 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Context 'DatabaseContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:16:01.418 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:01.419 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 77ms reading results.
2026-01-19 15:16:01.422 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:01.424 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:16:01.505 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Compiling query expression: 
'DbSet<AppUserRole>()
    .Join(
        inner: DbSet<AppRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2026-01-19 15:16:01.544 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-19 15:16:01.549 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:01.551 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:01.552 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:16:01.553 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:16:01.555 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 15:16:01.556 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 15:16:01.563 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 15:16:01.566 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:01.567 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 2ms reading results.
2026-01-19 15:16:01.569 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:01.570 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:16:01.600 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  CQRS Handled SignInCommand in 478ms
2026-01-19 15:16:01.607 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-19 15:16:01.612 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-01-19 15:16:01.614 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-01-19 15:16:01.615 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-19 15:16:01.616 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-19 15:16:01.618 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-19 15:16:01.620 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  Executing OkObjectResult, writing value of type 'Application.Common.ApiResult`1[[Application.CQRS.DTOs.Auth.SignInDTO, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-19 15:16:01.638 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  Executed action API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee) in 597.3654ms
2026-01-19 15:16:01.641 +07:00 8d057e4c-4106-4046-8983-133a82c48d7e INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 15:16:01.643 +07:00  DBG  Connection id "0HNIN6B79PCGM" completed keep alive response.
2026-01-19 15:16:01.645 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:16:01.649 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:01.650 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:16:01.652 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - 200 null application/json; charset=utf-8 687.8941ms
2026-01-19 15:16:33.484 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Token/refresh - application/json 520
2026-01-19 15:16:33.491 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  1 candidate(s) found for the request path '/api/v1/Token/refresh'
2026-01-19 15:16:33.493 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)' with route pattern 'api/v{v:apiVersion}/Token/refresh' is valid for the request path '/api/v1/Token/refresh'
2026-01-19 15:16:33.495 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)'
2026-01-19 15:16:33.496 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 15:16:33.497 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a INF  CORS policy execution successful.
2026-01-19 15:16:33.498 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:16:33.499 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:16:33.499 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:16:33.500 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)'
2026-01-19 15:16:33.505 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a INF  Route matched with {action = "RefreshToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand) on controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee).
2026-01-19 15:16:33.507 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 15:16:33.508 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 15:16:33.509 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:16:33.511 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 15:16:33.513 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:16:33.514 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:16:33.516 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:16:33.517 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand' ...
2026-01-19 15:16:33.519 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand' using the name '' in request data ...
2026-01-19 15:16:33.521 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 15:16:33.523 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Connection id "0HNIN6B79PCGM", Request id "0HNIN6B79PCGM:00000002": started reading request body.
2026-01-19 15:16:33.524 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Connection id "0HNIN6B79PCGM", Request id "0HNIN6B79PCGM:00000002": done reading request body.
2026-01-19 15:16:33.526 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'
2026-01-19 15:16:33.527 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'.
2026-01-19 15:16:33.528 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'.
2026-01-19 15:16:33.529 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand' ...
2026-01-19 15:16:33.531 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'.
2026-01-19 15:16:33.534 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a INF  CQRS Handling RefreshTokenCommand | Payload: {"AccessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlNzY2ZjJkZi05MDkyLTQ2OWItM2Y3MC0wOGRlNTcyYmNiNDQiLCJuYW1lIjoidGFuaDYyNCIsInVuaXF1ZV9uYW1lIjoidGFuaDYyNCIsImVtYWlsIjoiYW5odHJhbmR1eTI1QGdtYWlsLmNvbSIsInJvbGUiOiJtZW1iZXIiLCJuYmYiOjE3Njg4MTA1NjEsImV4cCI6MTc2ODg0MDU2MSwiaWF0IjoxNzY4ODEwNTYxLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjU1MDEifQ.QmssbEudEguwQkRW_AdcDO8uFfyrIDg8o5h4qpN_hsg","RefreshToken":"NWHAVDEYF56XTQ0M180DUNANC2QPKG3HFMUELOLSP7C3BA6K91YKW6W875QPLFPR","$type":"RefreshTokenCommand"}
2026-01-19 15:16:33.549 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:16:33.554 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Compiling query expression: 
'DbSet<UserRefreshToken>()
    .Where(x => x.AccessToken == __request_AccessToken_0 && x.RefreshToken == __request_RefreshToken_1 && !(x.IsRevoked) && !(x.IsUsed))
    .FirstOrDefault()'
2026-01-19 15:16:33.563 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserRefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE (((u.AccessToken == @__request_AccessToken_0) && (u.RefreshToken == @__request_RefreshToken_1)) && Not(u.IsRevoked)) && Not(u.IsUsed)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE (((u.AccessToken == @__request_AccessToken_0) && (u.RefreshToken == @__request_RefreshToken_1)) && Not(u.IsRevoked)) && Not(u.IsUsed), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserRefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserRefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserRefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserRefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserRefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]: 
                        {
                            return 
                            {
                                UserRefreshToken instance;
                                instance = new UserRefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<AccessToken>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(2) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(2);
                                instance.<ExpiryTime>k__BackingField = dataReader.GetDateTime(3);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(4);
                                instance.<IsUsed>k__BackingField = dataReader.GetBoolean(5);
                                instance.<RefreshToken>k__BackingField = dataReader.GetString(6);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(7) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(7);
                                instance.<UserId>k__BackingField = dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserRefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .SingleOrDefault()'
2026-01-19 15:16:33.579 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Creating DbConnection.
2026-01-19 15:16:33.580 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Created DbConnection. (0ms).
2026-01-19 15:16:33.581 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:33.583 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:33.584 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:16:33.585 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:16:33.586 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:16:33.587 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Executing DbCommand [Parameters=[@__request_AccessToken_0='?' (Size = 4000), @__request_RefreshToken_1='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[AccessToken] = @__request_AccessToken_0 AND [u].[RefreshToken] = @__request_RefreshToken_1 AND [u].[IsRevoked] = CAST(0 AS bit) AND [u].[IsUsed] = CAST(0 AS bit)
2026-01-19 15:16:33.591 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a INF  Executed DbCommand (4ms) [Parameters=[@__request_AccessToken_0='?' (Size = 4000), @__request_RefreshToken_1='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[AccessToken] = @__request_AccessToken_0 AND [u].[RefreshToken] = @__request_RefreshToken_1 AND [u].[IsRevoked] = CAST(0 AS bit) AND [u].[IsUsed] = CAST(0 AS bit)
2026-01-19 15:16:33.593 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:33.594 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 1ms reading results.
2026-01-19 15:16:33.596 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:33.597 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:16:33.682 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a ERR  CQRS Error in RefreshTokenCommand after 147ms
Application.Exceptions.UnauthorizedException: Invalid refresh token
   at Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenHandler.Handle(RefreshTokenCommand request, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\CQRS\Commands\Auth\RefreshToken\RefreshTokenHandler.cs:line 37
   at Application.Behavior.LoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in D:\C# .Net Core\Project\Employee\API-Employee\Application\Behavior\LoggingBehavior.cs:line 34
2026-01-19 15:16:33.768 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a INF  Executed action API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee) in 253.5384ms
2026-01-19 15:16:33.770 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)'
2026-01-19 15:16:33.785 +07:00 323e21d5-dfb3-44f9-aa04-d0ea78ee5b9a WRN  Handled exception at /api/v1/Token/refresh StatusCode 401 Message Invalid refresh token
2026-01-19 15:16:33.791 +07:00  DBG  Connection id "0HNIN6B79PCGM" completed keep alive response.
2026-01-19 15:16:33.792 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:16:33.793 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:16:33.795 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:16:33.797 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Token/refresh - 401 null application/json 314.6869ms
2026-01-19 15:35:17.783 +07:00  DBG  Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-19 15:35:18.012 +07:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-19 15:35:18.088 +07:00  INF  User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-19 15:35:18.455 +07:00  DBG  The index {'EmployeeId'} was not created on entity type 'EmployeeAttendance' as the properties are already covered by the index {'EmployeeId', 'WorkDate'}.
2026-01-19 15:35:18.457 +07:00  DBG  The index {'UserId'} was not created on entity type 'AppUserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2026-01-19 15:35:18.458 +07:00  DBG  The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2026-01-19 15:35:18.645 +07:00  DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:35:18.688 +07:00  DBG  Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2026-01-19 15:35:18.896 +07:00  DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<bool>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        bool? value1;
        value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
        return (bool)value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .Single()'
2026-01-19 15:35:18.926 +07:00  DBG  Creating DbConnection.
2026-01-19 15:35:18.941 +07:00  DBG  Created DbConnection. (13ms).
2026-01-19 15:35:18.945 +07:00  DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:35:19.120 +07:00  DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:35:19.125 +07:00  DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:35:19.131 +07:00  DBG  Created DbCommand for 'ExecuteReader' (3ms).
2026-01-19 15:35:19.134 +07:00  DBG  Initialized DbCommand for 'ExecuteReader' (9ms).
2026-01-19 15:35:19.142 +07:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 15:35:19.165 +07:00  INF  Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 15:35:19.176 +07:00  DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:35:19.182 +07:00  DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 9ms reading results.
2026-01-19 15:35:19.185 +07:00  DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:35:19.190 +07:00  DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (4ms).
2026-01-19 15:35:19.194 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:35:19.196 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:35:19.198 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:35:19.203 +07:00  DBG  Hosting starting
2026-01-19 15:35:19.211 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-3a3f5ba7-96ca-43ee-aa50-0baf947a8e30.xml'.
2026-01-19 15:35:19.216 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8600f587-dc07-4d5b-bb2d-6f3e09633935.xml'.
2026-01-19 15:35:19.219 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8ded6968-7296-406f-847b-09157786742c.xml'.
2026-01-19 15:35:19.220 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bcbbd09c-5d11-4ea7-a210-5a7b4541efa2.xml'.
2026-01-19 15:35:19.221 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1.xml'.
2026-01-19 15:35:19.222 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-e60ff1e8-9769-4c99-9c41-530a7dbb1337.xml'.
2026-01-19 15:35:19.224 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-f5e67d02-4c24-4201-b8e7-897e61f0ba09.xml'.
2026-01-19 15:35:19.228 +07:00  DBG  Found key {3a3f5ba7-96ca-43ee-aa50-0baf947a8e30}.
2026-01-19 15:35:19.233 +07:00  DBG  Found key {8600f587-dc07-4d5b-bb2d-6f3e09633935}.
2026-01-19 15:35:19.235 +07:00  DBG  Found key {8ded6968-7296-406f-847b-09157786742c}.
2026-01-19 15:35:19.236 +07:00  DBG  Found key {bcbbd09c-5d11-4ea7-a210-5a7b4541efa2}.
2026-01-19 15:35:19.237 +07:00  DBG  Found key {bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1}.
2026-01-19 15:35:19.238 +07:00  DBG  Found key {e60ff1e8-9769-4c99-9c41-530a7dbb1337}.
2026-01-19 15:35:19.239 +07:00  DBG  Found key {f5e67d02-4c24-4201-b8e7-897e61f0ba09}.
2026-01-19 15:35:19.245 +07:00  DBG  Considering key {8ded6968-7296-406f-847b-09157786742c} with expiration date 2026-04-16 02:40:32Z as default key.
2026-01-19 15:35:19.250 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 15:35:19.253 +07:00  DBG  Decrypting secret element using Windows DPAPI.
2026-01-19 15:35:19.255 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 15:35:19.258 +07:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-19 15:35:19.261 +07:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-19 15:35:19.266 +07:00  DBG  Using key {8ded6968-7296-406f-847b-09157786742c} as the default key.
2026-01-19 15:35:19.267 +07:00  DBG  Key ring with default key {8ded6968-7296-406f-847b-09157786742c} was loaded during application startup.
2026-01-19 15:35:19.273 +07:00  DBG  Middleware loaded
2026-01-19 15:35:19.275 +07:00  DBG  Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16509 B).
2026-01-19 15:35:19.277 +07:00  DBG  Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-19 15:35:19.316 +07:00  WRN  The WebRootPath was not found: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\wwwroot. Static files may be unavailable.
2026-01-19 15:35:19.349 +07:00  DBG  Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-19 15:35:19.391 +07:00  INF  Now listening on: http://[::]:5501
2026-01-19 15:35:19.392 +07:00  DBG  Loaded hosting startup assembly API-Employee
2026-01-19 15:35:19.393 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-19 15:35:19.394 +07:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-19 15:35:19.395 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-19 15:35:19.490 +07:00  INF  Application started. Press Ctrl+C to shut down.
2026-01-19 15:35:19.491 +07:00  INF  Hosting environment: Development
2026-01-19 15:35:19.493 +07:00  INF  Content root path: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee
2026-01-19 15:35:19.494 +07:00  DBG  Hosting started
2026-01-19 15:35:19.712 +07:00  DBG  Connection id "0HNIN6MMVQBU9" received FIN.
2026-01-19 15:35:19.719 +07:00  DBG  Connection id "0HNIN6MMVQBU9" accepted.
2026-01-19 15:35:19.721 +07:00  DBG  Connection id "0HNIN6MMVQBU9" started.
2026-01-19 15:35:19.731 +07:00  DBG  Connection id "0HNIN6MMVQBU9" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 15:35:19.735 +07:00  DBG  Connection id "0HNIN6MMVQBU9" disconnecting.
2026-01-19 15:35:19.740 +07:00  DBG  Connection id "0HNIN6MMVQBU9" stopped.
2026-01-19 15:35:19.861 +07:00  DBG  Connection id "0HNIN6MMVQBUA" accepted.
2026-01-19 15:35:19.863 +07:00  DBG  Connection id "0HNIN6MMVQBUA" started.
2026-01-19 15:35:19.865 +07:00  DBG  Connection id "0HNIN6MMVQBUB" accepted.
2026-01-19 15:35:19.871 +07:00  DBG  Connection id "0HNIN6MMVQBUB" started.
2026-01-19 15:35:19.904 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/index.html - null null
2026-01-19 15:35:19.987 +07:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2026-01-19 15:35:20.025 +07:00 281e4813-d79c-434d-83ae-40aa288b9bff DBG  No candidates found for the request path '/swagger/index.html'
2026-01-19 15:35:20.028 +07:00 281e4813-d79c-434d-83ae-40aa288b9bff DBG  Request did not match any endpoints
2026-01-19 15:35:20.030 +07:00 281e4813-d79c-434d-83ae-40aa288b9bff WRN  Failed to determine the https port for redirect.
2026-01-19 15:35:20.089 +07:00 281e4813-d79c-434d-83ae-40aa288b9bff DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:35:20.099 +07:00 281e4813-d79c-434d-83ae-40aa288b9bff DBG  The request path /swagger/index.html does not match an existing file
2026-01-19 15:35:20.147 +07:00 281e4813-d79c-434d-83ae-40aa288b9bff DBG  Response markup is scheduled to include Browser Link script injection.
2026-01-19 15:35:20.150 +07:00 281e4813-d79c-434d-83ae-40aa288b9bff DBG  Response markup is scheduled to include browser refresh script injection.
2026-01-19 15:35:20.163 +07:00  DBG  Response markup was updated to include Browser Link script injection.
2026-01-19 15:35:20.165 +07:00  DBG  Response markup was updated to include browser refresh script injection.
2026-01-19 15:35:20.167 +07:00  DBG  Connection id "0HNIN6MMVQBUA" completed keep alive response.
2026-01-19 15:35:20.172 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/index.html - 200 null text/html;charset=utf-8 275.5773ms
2026-01-19 15:35:20.173 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - null null
2026-01-19 15:35:20.178 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_vs/browserLink - null null
2026-01-19 15:35:20.181 +07:00  DBG  Script injected: /_framework/aspnetcore-browser-refresh.js
2026-01-19 15:35:20.182 +07:00  DBG  Connection id "0HNIN6MMVQBUB" completed keep alive response.
2026-01-19 15:35:20.183 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 10.3502ms
2026-01-19 15:35:20.213 +07:00  DBG  Connection id "0HNIN6MMVQBUA" completed keep alive response.
2026-01-19 15:35:20.215 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.8804ms
2026-01-19 15:35:20.245 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - null null
2026-01-19 15:35:20.248 +07:00 8ea329f8-5ca2-49c1-877d-7a2a6f04f0d5 DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2026-01-19 15:35:20.249 +07:00 8ea329f8-5ca2-49c1-877d-7a2a6f04f0d5 DBG  Request did not match any endpoints
2026-01-19 15:35:20.252 +07:00 8ea329f8-5ca2-49c1-877d-7a2a6f04f0d5 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:35:20.253 +07:00 8ea329f8-5ca2-49c1-877d-7a2a6f04f0d5 DBG  The request path /swagger/v1/swagger.json does not match an existing file
2026-01-19 15:35:20.297 +07:00  DBG  Connection id "0HNIN6MMVQBUA" completed keep alive response.
2026-01-19 15:35:20.299 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.192ms
2026-01-19 15:37:21.718 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - application/json 56
2026-01-19 15:37:21.740 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  1 candidate(s) found for the request path '/api/v1/Auth/sign-in'
2026-01-19 15:37:21.743 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)' with route pattern 'api/v{v:apiVersion}/Auth/sign-in' is valid for the request path '/api/v1/Auth/sign-in'
2026-01-19 15:37:21.749 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 15:37:21.753 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 15:37:21.754 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  CORS policy execution successful.
2026-01-19 15:37:21.757 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:37:21.759 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:37:21.760 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:37:21.762 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 15:37:21.783 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Application.CQRS.Commands.Auth.SignIn.SignInCommand) on controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee).
2026-01-19 15:37:21.787 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 15:37:21.789 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 15:37:21.790 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:37:21.792 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 15:37:21.793 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:37:21.797 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 15:37:21.800 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 WRN  You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-01-19 15:37:21.803 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 15:37:21.807 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 15:37:21.811 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' using the name '' in request data ...
2026-01-19 15:37:21.814 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 15:37:21.823 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Connection id "0HNIN6MMVQBUA", Request id "0HNIN6MMVQBUA:00000004": started reading request body.
2026-01-19 15:37:21.824 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Connection id "0HNIN6MMVQBUA", Request id "0HNIN6MMVQBUA:00000004": done reading request body.
2026-01-19 15:37:21.835 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'
2026-01-19 15:37:21.838 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 15:37:21.839 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 15:37:21.840 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 15:37:21.844 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 15:37:21.873 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  CQRS Handling SignInCommand | Payload: {"Username":"tanh624","Password":"tanh@123456","$type":"SignInCommand"}
2026-01-19 15:37:21.923 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:37:21.935 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2026-01-19 15:37:21.993 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: AppUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Identity.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]: 
                            {
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<DateBirth>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<FirstName>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<LastName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(10) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(10);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(15);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(17);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(18) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(18);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.DatabaseContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-19 15:37:22.022 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Creating DbConnection.
2026-01-19 15:37:22.023 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Created DbConnection. (1ms).
2026-01-19 15:37:22.025 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.030 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.032 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:37:22.033 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:37:22.038 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-19 15:37:22.042 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 15:37:22.076 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  Executed DbCommand (37ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 15:37:22.108 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Context 'DatabaseContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:22.154 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.156 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 77ms reading results.
2026-01-19 15:37:22.159 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.161 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:37:22.244 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Compiling query expression: 
'DbSet<AppUserRole>()
    .Join(
        inner: DbSet<AppRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2026-01-19 15:37:22.281 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-19 15:37:22.287 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.289 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.290 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:37:22.291 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:37:22.293 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 15:37:22.294 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 15:37:22.300 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 15:37:22.303 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.304 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 1ms reading results.
2026-01-19 15:37:22.306 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.307 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:37:22.356 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  'DatabaseContext' generated a value for the property 'UserRefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:22.383 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Context 'DatabaseContext' started tracking 'UserRefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:22.388 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 15:37:22.416 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 15:37:22.420 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  SaveChanges starting for 'DatabaseContext'.
2026-01-19 15:37:22.422 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 15:37:22.424 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 15:37:22.468 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.471 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.474 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:37:22.475 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:37:22.478 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2026-01-19 15:37:22.479 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (Size = 1000) (DbType = AnsiString), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([Id], [AccessToken], [CreatedAt], [ExpiryTime], [IsRevoked], [IsUsed], [RefreshToken], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-19 15:37:22.494 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (Size = 1000) (DbType = AnsiString), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([Id], [AccessToken], [CreatedAt], [ExpiryTime], [IsRevoked], [IsUsed], [RefreshToken], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-19 15:37:22.500 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.502 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 4ms reading results.
2026-01-19 15:37:22.504 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.506 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:37:22.513 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:22.517 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  SaveChanges completed for 'DatabaseContext' with 1 entities written to the database.
2026-01-19 15:37:22.519 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  CQRS Handled SignInCommand in 647ms
2026-01-19 15:37:22.524 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-19 15:37:22.529 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-01-19 15:37:22.531 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-01-19 15:37:22.533 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-19 15:37:22.534 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-19 15:37:22.535 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-19 15:37:22.537 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  Executing OkObjectResult, writing value of type 'Application.Common.ApiResult`1[[Application.CQRS.DTOs.Auth.SignInDTO, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-19 15:37:22.549 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  Executed action API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee) in 751.1254ms
2026-01-19 15:37:22.551 +07:00 8f8335ca-e44b-4fc6-ae2f-eaa7badba535 INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 15:37:22.553 +07:00  DBG  Connection id "0HNIN6MMVQBUA" completed keep alive response.
2026-01-19 15:37:22.555 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:37:22.558 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:22.560 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:37:22.561 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - 200 null application/json; charset=utf-8 843.0584ms
2026-01-19 15:37:39.461 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Token/refresh - application/json 520
2026-01-19 15:37:39.466 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  1 candidate(s) found for the request path '/api/v1/Token/refresh'
2026-01-19 15:37:39.468 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)' with route pattern 'api/v{v:apiVersion}/Token/refresh' is valid for the request path '/api/v1/Token/refresh'
2026-01-19 15:37:39.470 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)'
2026-01-19 15:37:39.471 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 15:37:39.472 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  CORS policy execution successful.
2026-01-19 15:37:39.473 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:37:39.474 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:37:39.475 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:37:39.476 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)'
2026-01-19 15:37:39.481 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  Route matched with {action = "RefreshToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshToken(Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand) on controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee).
2026-01-19 15:37:39.484 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 15:37:39.485 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 15:37:39.486 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:37:39.488 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 15:37:39.490 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:37:39.492 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:37:39.493 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:37:39.495 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand' ...
2026-01-19 15:37:39.497 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand' using the name '' in request data ...
2026-01-19 15:37:39.498 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 15:37:39.501 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Connection id "0HNIN6MMVQBUA", Request id "0HNIN6MMVQBUA:00000005": started reading request body.
2026-01-19 15:37:39.502 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Connection id "0HNIN6MMVQBUA", Request id "0HNIN6MMVQBUA:00000005": done reading request body.
2026-01-19 15:37:39.504 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'
2026-01-19 15:37:39.505 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'.
2026-01-19 15:37:39.507 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'.
2026-01-19 15:37:39.508 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand' ...
2026-01-19 15:37:39.511 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RefreshToken.RefreshTokenCommand'.
2026-01-19 15:37:39.515 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  CQRS Handling RefreshTokenCommand | Payload: {"AccessToken":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlNzY2ZjJkZi05MDkyLTQ2OWItM2Y3MC0wOGRlNTcyYmNiNDQiLCJuYW1lIjoidGFuaDYyNCIsInVuaXF1ZV9uYW1lIjoidGFuaDYyNCIsImVtYWlsIjoiYW5odHJhbmR1eTI1QGdtYWlsLmNvbSIsInJvbGUiOiJtZW1iZXIiLCJuYmYiOjE3Njg4MTE4NDIsImV4cCI6MTc2ODg0MTg0MiwiaWF0IjoxNzY4ODExODQyLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjMwMDAiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjU1MDEifQ.cjYXhmGDY3ziOQCGJFeYfyi_vb4DspTITzX4iQIQCd4","RefreshToken":"4JAGX5DPRQO17LDU2V36N5VHICMQKZPXIF8FTCWEKNXGPJK9J93DGB456BOJG2QM","$type":"RefreshTokenCommand"}
2026-01-19 15:37:39.532 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:37:39.536 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Compiling query expression: 
'DbSet<UserRefreshToken>()
    .Where(x => x.AccessToken == __request_AccessToken_0 && x.RefreshToken == __request_RefreshToken_1 && !(x.IsRevoked) && !(x.IsUsed))
    .FirstOrDefault()'
2026-01-19 15:37:39.548 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserRefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE (((u.AccessToken == @__request_AccessToken_0) && (u.RefreshToken == @__request_RefreshToken_1)) && Not(u.IsRevoked)) && Not(u.IsUsed)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE (((u.AccessToken == @__request_AccessToken_0) && (u.RefreshToken == @__request_RefreshToken_1)) && Not(u.IsRevoked)) && Not(u.IsUsed), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserRefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserRefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserRefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserRefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserRefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]: 
                        {
                            return 
                            {
                                UserRefreshToken instance;
                                instance = new UserRefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<AccessToken>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(2) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(2);
                                instance.<ExpiryTime>k__BackingField = dataReader.GetDateTime(3);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(4);
                                instance.<IsUsed>k__BackingField = dataReader.GetBoolean(5);
                                instance.<RefreshToken>k__BackingField = dataReader.GetString(6);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(7) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(7);
                                instance.<UserId>k__BackingField = dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserRefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .SingleOrDefault()'
2026-01-19 15:37:39.562 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Creating DbConnection.
2026-01-19 15:37:39.563 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Created DbConnection. (0ms).
2026-01-19 15:37:39.564 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.566 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.567 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:37:39.568 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:37:39.569 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:37:39.570 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Executing DbCommand [Parameters=[@__request_AccessToken_0='?' (Size = 4000), @__request_RefreshToken_1='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[AccessToken] = @__request_AccessToken_0 AND [u].[RefreshToken] = @__request_RefreshToken_1 AND [u].[IsRevoked] = CAST(0 AS bit) AND [u].[IsUsed] = CAST(0 AS bit)
2026-01-19 15:37:39.583 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  Executed DbCommand (13ms) [Parameters=[@__request_AccessToken_0='?' (Size = 4000), @__request_RefreshToken_1='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[AccessToken] = @__request_AccessToken_0 AND [u].[RefreshToken] = @__request_RefreshToken_1 AND [u].[IsRevoked] = CAST(0 AS bit) AND [u].[IsUsed] = CAST(0 AS bit)
2026-01-19 15:37:39.588 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Context 'DatabaseContext' started tracking 'UserRefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:39.590 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.591 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 3ms reading results.
2026-01-19 15:37:39.593 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.594 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:37:39.605 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(e => object.Equals(
        objA: EF.Property<object>(e, "Id"), 
        objB: __p_0))'
2026-01-19 15:37:39.622 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.Id == @__p_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.Id == @__p_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: AppUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Identity.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]: 
                            {
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<DateBirth>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<FirstName>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<LastName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(10) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(10);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(15);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(17);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(18) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(18);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.DatabaseContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-19 15:37:39.640 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.641 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.642 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:37:39.643 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:37:39.644 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:37:39.645 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Executing DbCommand [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-19 15:37:39.650 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2026-01-19 15:37:39.653 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Context 'DatabaseContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:39.654 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.656 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 2ms reading results.
2026-01-19 15:37:39.657 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.658 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:37:39.661 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:39.666 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.667 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.668 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:37:39.669 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:37:39.670 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 15:37:39.671 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 15:37:39.674 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 15:37:39.677 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.678 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 1ms reading results.
2026-01-19 15:37:39.680 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.681 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:37:39.684 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  'DatabaseContext' generated a value for the property 'UserRefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:39.686 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Context 'DatabaseContext' started tracking 'UserRefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:39.687 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 15:37:39.688 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 15:37:39.689 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  SaveChanges starting for 'DatabaseContext'.
2026-01-19 15:37:39.691 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 15:37:39.692 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 15:37:39.701 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Executing 2 update commands as a batch.
2026-01-19 15:37:39.703 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.705 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.707 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Beginning transaction with isolation level 'Unspecified'.
2026-01-19 15:37:39.713 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Began transaction with isolation level 'ReadCommitted'.
2026-01-19 15:37:39.715 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:37:39.715 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:37:39.718 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2026-01-19 15:37:39.719 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Executing DbCommand [Parameters=[@p8='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 1000) (DbType = AnsiString), @p6='?' (DbType = DateTime2), @p7='?' (Size = 50) (DbType = AnsiString), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (Size = 1000) (DbType = AnsiString), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserRefreshTokens] SET [AccessToken] = @p0, [CreatedAt] = @p1, [ExpiryTime] = @p2, [IsRevoked] = @p3, [IsUsed] = @p4, [RefreshToken] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
INSERT INTO [UserRefreshTokens] ([Id], [AccessToken], [CreatedAt], [ExpiryTime], [IsRevoked], [IsUsed], [RefreshToken], [UpdatedAt], [UserId])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-01-19 15:37:39.727 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  Executed DbCommand (8ms) [Parameters=[@p8='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 1000) (DbType = AnsiString), @p6='?' (DbType = DateTime2), @p7='?' (Size = 50) (DbType = AnsiString), @p9='?' (DbType = Guid), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = Boolean), @p14='?' (DbType = Boolean), @p15='?' (Size = 1000) (DbType = AnsiString), @p16='?' (DbType = DateTime2), @p17='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [UserRefreshTokens] SET [AccessToken] = @p0, [CreatedAt] = @p1, [ExpiryTime] = @p2, [IsRevoked] = @p3, [IsUsed] = @p4, [RefreshToken] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
INSERT INTO [UserRefreshTokens] ([Id], [AccessToken], [CreatedAt], [ExpiryTime], [IsRevoked], [IsUsed], [RefreshToken], [UpdatedAt], [UserId])
VALUES (@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
2026-01-19 15:37:39.735 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.737 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 4ms reading results.
2026-01-19 15:37:39.740 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Committing transaction.
2026-01-19 15:37:39.743 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Committed transaction.
2026-01-19 15:37:39.746 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.747 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:37:39.749 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Disposing transaction.
2026-01-19 15:37:39.750 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:39.753 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:37:39.754 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  SaveChanges completed for 'DatabaseContext' with 2 entities written to the database.
2026-01-19 15:37:39.756 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  CQRS Handled RefreshTokenCommand in 241ms
2026-01-19 15:37:39.757 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-19 15:37:39.759 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-01-19 15:37:39.761 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-01-19 15:37:39.762 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-19 15:37:39.763 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-19 15:37:39.764 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-19 15:37:39.765 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  Executing OkObjectResult, writing value of type 'Application.Common.ApiResult`1[[Application.CQRS.DTOs.Auth.RefreshTokenDTO, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-19 15:37:39.768 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  Executed action API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee) in 276.9373ms
2026-01-19 15:37:39.770 +07:00 cdbe2067-1fd0-401a-8f0e-80449fd0d0c2 INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RefreshToken (API-Employee)'
2026-01-19 15:37:39.771 +07:00  DBG  Connection id "0HNIN6MMVQBUA" completed keep alive response.
2026-01-19 15:37:39.772 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:37:39.773 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:37:39.774 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:37:39.775 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Token/refresh - 200 null application/json; charset=utf-8 314.3281ms
2026-01-19 15:38:21.561 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Token/revoke - application/json 88
2026-01-19 15:38:21.566 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  1 candidate(s) found for the request path '/api/v1/Token/revoke'
2026-01-19 15:38:21.567 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)' with route pattern 'api/v{v:apiVersion}/Token/revoke' is valid for the request path '/api/v1/Token/revoke'
2026-01-19 15:38:21.569 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)'
2026-01-19 15:38:21.570 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 15:38:21.571 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  CORS policy execution successful.
2026-01-19 15:38:21.572 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:38:21.574 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:38:21.574 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:38:21.575 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)'
2026-01-19 15:38:21.579 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand) on controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee).
2026-01-19 15:38:21.581 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 15:38:21.582 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 15:38:21.583 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:38:21.585 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 15:38:21.587 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:38:21.588 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:38:21.590 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:38:21.591 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand' ...
2026-01-19 15:38:21.592 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand' using the name '' in request data ...
2026-01-19 15:38:21.594 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 15:38:21.595 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Connection id "0HNIN6MMVQBUA", Request id "0HNIN6MMVQBUA:00000006": started reading request body.
2026-01-19 15:38:21.596 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Connection id "0HNIN6MMVQBUA", Request id "0HNIN6MMVQBUA:00000006": done reading request body.
2026-01-19 15:38:21.598 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'
2026-01-19 15:38:21.599 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'.
2026-01-19 15:38:21.600 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'.
2026-01-19 15:38:21.601 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand' ...
2026-01-19 15:38:21.602 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'.
2026-01-19 15:38:21.608 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  CQRS Handling RevokeTokenCommand | Payload: {"RefreshToken":"B79C1Z0TW7GFV6K2HTLX04GFJVDKYLLJD3KHZPPYZM1U3N28FVG6MRSIDGX3GKST","$type":"RevokeTokenCommand"}
2026-01-19 15:38:21.614 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:38:21.616 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Compiling query expression: 
'DbSet<UserRefreshToken>()
    .Where(x => x.RefreshToken == __request_RefreshToken_0)
    .FirstOrDefault()'
2026-01-19 15:38:21.621 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserRefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE u.RefreshToken == @__request_RefreshToken_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE u.RefreshToken == @__request_RefreshToken_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserRefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserRefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserRefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserRefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserRefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]: 
                        {
                            return 
                            {
                                UserRefreshToken instance;
                                instance = new UserRefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<AccessToken>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(2) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(2);
                                instance.<ExpiryTime>k__BackingField = dataReader.GetDateTime(3);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(4);
                                instance.<IsUsed>k__BackingField = dataReader.GetBoolean(5);
                                instance.<RefreshToken>k__BackingField = dataReader.GetString(6);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(7) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(7);
                                instance.<UserId>k__BackingField = dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserRefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .SingleOrDefault()'
2026-01-19 15:38:21.630 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Creating DbConnection.
2026-01-19 15:38:21.631 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Created DbConnection. (0ms).
2026-01-19 15:38:21.632 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:38:21.633 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:38:21.634 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:38:21.635 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:38:21.636 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Initialized DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:38:21.637 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Executing DbCommand [Parameters=[@__request_RefreshToken_0='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[RefreshToken] = @__request_RefreshToken_0
2026-01-19 15:38:21.641 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  Executed DbCommand (4ms) [Parameters=[@__request_RefreshToken_0='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[RefreshToken] = @__request_RefreshToken_0
2026-01-19 15:38:21.643 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Context 'DatabaseContext' started tracking 'UserRefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:38:21.645 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:38:21.646 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 2ms reading results.
2026-01-19 15:38:21.648 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:38:21.649 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:38:21.651 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:38:21.652 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 15:38:21.653 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 15:38:21.654 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  SaveChanges starting for 'DatabaseContext'.
2026-01-19 15:38:21.655 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 15:38:21.656 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 15:38:21.657 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:38:21.658 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:38:21.659 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:38:21.660 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 15:38:21.662 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 15:38:21.663 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Executing DbCommand [Parameters=[@p8='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 1000) (DbType = AnsiString), @p6='?' (DbType = DateTime2), @p7='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserRefreshTokens] SET [AccessToken] = @p0, [CreatedAt] = @p1, [ExpiryTime] = @p2, [IsRevoked] = @p3, [IsUsed] = @p4, [RefreshToken] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2026-01-19 15:38:21.677 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  Executed DbCommand (14ms) [Parameters=[@p8='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 1000) (DbType = AnsiString), @p6='?' (DbType = DateTime2), @p7='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserRefreshTokens] SET [AccessToken] = @p0, [CreatedAt] = @p1, [ExpiryTime] = @p2, [IsRevoked] = @p3, [IsUsed] = @p4, [RefreshToken] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2026-01-19 15:38:21.680 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:38:21.681 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 0ms reading results.
2026-01-19 15:38:21.682 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:38:21.683 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (0ms).
2026-01-19 15:38:21.684 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:38:21.686 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  SaveChanges completed for 'DatabaseContext' with 1 entities written to the database.
2026-01-19 15:38:21.689 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  CQRS Handled RevokeTokenCommand in 80ms
2026-01-19 15:38:21.690 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-19 15:38:21.692 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-01-19 15:38:21.693 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-01-19 15:38:21.694 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-19 15:38:21.694 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-19 15:38:21.695 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-19 15:38:21.696 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  Executing OkObjectResult, writing value of type 'Application.Common.ApiResult`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-19 15:38:21.699 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  Executed action API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee) in 110.6617ms
2026-01-19 15:38:21.700 +07:00 5b5c080f-ed8d-41e8-9a51-92f3b27deaac INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)'
2026-01-19 15:38:21.701 +07:00  DBG  Connection id "0HNIN6MMVQBUA" completed keep alive response.
2026-01-19 15:38:21.702 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:38:21.703 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:38:21.704 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:38:21.706 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Token/revoke - 200 null application/json; charset=utf-8 144.225ms
2026-01-19 15:40:07.004 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Token/revoke - application/json 88
2026-01-19 15:40:07.011 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  1 candidate(s) found for the request path '/api/v1/Token/revoke'
2026-01-19 15:40:07.013 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)' with route pattern 'api/v{v:apiVersion}/Token/revoke' is valid for the request path '/api/v1/Token/revoke'
2026-01-19 15:40:07.015 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)'
2026-01-19 15:40:07.016 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 15:40:07.019 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  CORS policy execution successful.
2026-01-19 15:40:07.020 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 15:40:07.022 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:40:07.022 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 15:40:07.023 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)'
2026-01-19 15:40:07.024 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand) on controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee).
2026-01-19 15:40:07.027 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 15:40:07.028 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 15:40:07.029 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:40:07.032 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 15:40:07.035 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 15:40:07.037 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:40:07.038 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 15:40:07.040 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand' ...
2026-01-19 15:40:07.042 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand' using the name '' in request data ...
2026-01-19 15:40:07.043 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 15:40:07.045 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Connection id "0HNIN6MMVQBUA", Request id "0HNIN6MMVQBUA:00000007": started reading request body.
2026-01-19 15:40:07.046 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Connection id "0HNIN6MMVQBUA", Request id "0HNIN6MMVQBUA:00000007": done reading request body.
2026-01-19 15:40:07.048 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'
2026-01-19 15:40:07.051 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'.
2026-01-19 15:40:07.053 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'.
2026-01-19 15:40:07.056 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand' ...
2026-01-19 15:40:07.058 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'.
2026-01-19 15:40:07.061 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  CQRS Handling RevokeTokenCommand | Payload: {"RefreshToken":"4JAGX5DPRQO17LDU2V36N5VHICMQKZPXIF8FTCWEKNXGPJK9J93DGB456BOJG2QM","$type":"RevokeTokenCommand"}
2026-01-19 15:40:07.064 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 15:40:07.069 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Creating DbConnection.
2026-01-19 15:40:07.069 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Created DbConnection. (0ms).
2026-01-19 15:40:07.070 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:40:07.072 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:40:07.073 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:40:07.074 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:40:07.075 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 15:40:07.077 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Executing DbCommand [Parameters=[@__request_RefreshToken_0='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[RefreshToken] = @__request_RefreshToken_0
2026-01-19 15:40:07.081 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  Executed DbCommand (5ms) [Parameters=[@__request_RefreshToken_0='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[RefreshToken] = @__request_RefreshToken_0
2026-01-19 15:40:07.085 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Context 'DatabaseContext' started tracking 'UserRefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:40:07.086 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:40:07.088 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 2ms reading results.
2026-01-19 15:40:07.090 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:40:07.091 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:40:07.092 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:40:07.094 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 15:40:07.098 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 15:40:07.099 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  SaveChanges starting for 'DatabaseContext'.
2026-01-19 15:40:07.100 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 15:40:07.101 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 15:40:07.102 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:40:07.103 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:40:07.104 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 15:40:07.105 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 15:40:07.107 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 15:40:07.108 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Executing DbCommand [Parameters=[@p8='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 1000) (DbType = AnsiString), @p6='?' (DbType = DateTime2), @p7='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserRefreshTokens] SET [AccessToken] = @p0, [CreatedAt] = @p1, [ExpiryTime] = @p2, [IsRevoked] = @p3, [IsUsed] = @p4, [RefreshToken] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2026-01-19 15:40:07.117 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  Executed DbCommand (9ms) [Parameters=[@p8='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 1000) (DbType = AnsiString), @p6='?' (DbType = DateTime2), @p7='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserRefreshTokens] SET [AccessToken] = @p0, [CreatedAt] = @p1, [ExpiryTime] = @p2, [IsRevoked] = @p3, [IsUsed] = @p4, [RefreshToken] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2026-01-19 15:40:07.120 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:40:07.121 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 1ms reading results.
2026-01-19 15:40:07.123 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:40:07.124 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 15:40:07.125 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 15:40:07.130 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  SaveChanges completed for 'DatabaseContext' with 1 entities written to the database.
2026-01-19 15:40:07.131 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  CQRS Handled RevokeTokenCommand in 70ms
2026-01-19 15:40:07.133 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-19 15:40:07.135 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-01-19 15:40:07.136 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-01-19 15:40:07.138 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-19 15:40:07.139 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-19 15:40:07.140 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-19 15:40:07.142 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  Executing OkObjectResult, writing value of type 'Application.Common.ApiResult`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-19 15:40:07.146 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  Executed action API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee) in 108.8529ms
2026-01-19 15:40:07.147 +07:00 1f4e5ef6-6e4d-4b64-9aaf-ac7003bf4f4c INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)'
2026-01-19 15:40:07.148 +07:00  DBG  Connection id "0HNIN6MMVQBUA" completed keep alive response.
2026-01-19 15:40:07.149 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 15:40:07.150 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 15:40:07.152 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 15:40:07.153 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Token/revoke - 200 null application/json; charset=utf-8 151.6053ms
2026-01-19 15:40:20.276 +07:00  DBG  Connection id "0HNIN6MMVQBUB" received FIN.
2026-01-19 15:40:20.278 +07:00  DBG  Connection id "0HNIN6MMVQBUB" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 15:40:20.284 +07:00  DBG  Connection id "0HNIN6MMVQBUB" disconnecting.
2026-01-19 15:40:20.286 +07:00  DBG  Connection id "0HNIN6MMVQBUB" stopped.
2026-01-19 16:18:48.349 +07:00  DBG  Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2026-01-19 16:18:48.567 +07:00  DBG  An 'IServiceProvider' was created for internal use by Entity Framework.
2026-01-19 16:18:48.645 +07:00  INF  User profile is available. Using 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2026-01-19 16:18:49.048 +07:00  DBG  The index {'EmployeeId'} was not created on entity type 'EmployeeAttendance' as the properties are already covered by the index {'EmployeeId', 'WorkDate'}.
2026-01-19 16:18:49.050 +07:00  DBG  The index {'UserId'} was not created on entity type 'AppUserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2026-01-19 16:18:49.051 +07:00  DBG  The index {'UserId'} was not created on entity type 'IdentityUserToken<Guid>' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2026-01-19 16:18:49.259 +07:00  DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 16:18:49.304 +07:00  DBG  Compiling query expression: 
'DbSet<AppRole>()
    .Any()'
2026-01-19 16:18:49.526 +07:00  DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<bool>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM AspNetRoles AS a), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        bool? value1;
        value1 = dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0);
        return (bool)value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .Single()'
2026-01-19 16:18:49.554 +07:00  DBG  Creating DbConnection.
2026-01-19 16:18:49.570 +07:00  DBG  Created DbConnection. (14ms).
2026-01-19 16:18:49.574 +07:00  DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:18:49.758 +07:00  DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:18:49.762 +07:00  DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 16:18:49.769 +07:00  DBG  Created DbCommand for 'ExecuteReader' (4ms).
2026-01-19 16:18:49.772 +07:00  DBG  Initialized DbCommand for 'ExecuteReader' (10ms).
2026-01-19 16:18:49.780 +07:00  DBG  Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 16:18:49.807 +07:00  INF  Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2026-01-19 16:18:49.817 +07:00  DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:18:49.824 +07:00  DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 9ms reading results.
2026-01-19 16:18:49.828 +07:00  DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:18:49.833 +07:00  DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (5ms).
2026-01-19 16:18:49.836 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 16:18:49.839 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:18:49.841 +07:00  DBG  Disposed connection to database '' on server '' (2ms).
2026-01-19 16:18:49.845 +07:00  DBG  Hosting starting
2026-01-19 16:18:49.855 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-3a3f5ba7-96ca-43ee-aa50-0baf947a8e30.xml'.
2026-01-19 16:18:49.859 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8600f587-dc07-4d5b-bb2d-6f3e09633935.xml'.
2026-01-19 16:18:49.861 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-8ded6968-7296-406f-847b-09157786742c.xml'.
2026-01-19 16:18:49.863 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bcbbd09c-5d11-4ea7-a210-5a7b4541efa2.xml'.
2026-01-19 16:18:49.864 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1.xml'.
2026-01-19 16:18:49.865 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-e60ff1e8-9769-4c99-9c41-530a7dbb1337.xml'.
2026-01-19 16:18:49.866 +07:00  DBG  Reading data from file 'C:\Users\ADMIN\AppData\Local\ASP.NET\DataProtection-Keys\key-f5e67d02-4c24-4201-b8e7-897e61f0ba09.xml'.
2026-01-19 16:18:49.872 +07:00  DBG  Found key {3a3f5ba7-96ca-43ee-aa50-0baf947a8e30}.
2026-01-19 16:18:49.878 +07:00  DBG  Found key {8600f587-dc07-4d5b-bb2d-6f3e09633935}.
2026-01-19 16:18:49.879 +07:00  DBG  Found key {8ded6968-7296-406f-847b-09157786742c}.
2026-01-19 16:18:49.880 +07:00  DBG  Found key {bcbbd09c-5d11-4ea7-a210-5a7b4541efa2}.
2026-01-19 16:18:49.882 +07:00  DBG  Found key {bf802ebd-f5d7-4dd0-a35d-d8f5ffbc0bc1}.
2026-01-19 16:18:49.883 +07:00  DBG  Found key {e60ff1e8-9769-4c99-9c41-530a7dbb1337}.
2026-01-19 16:18:49.884 +07:00  DBG  Found key {f5e67d02-4c24-4201-b8e7-897e61f0ba09}.
2026-01-19 16:18:49.890 +07:00  DBG  Considering key {8ded6968-7296-406f-847b-09157786742c} with expiration date 2026-04-16 02:40:32Z as default key.
2026-01-19 16:18:49.896 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 16:18:49.898 +07:00  DBG  Decrypting secret element using Windows DPAPI.
2026-01-19 16:18:49.900 +07:00  DBG  Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2026-01-19 16:18:49.904 +07:00  DBG  Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2026-01-19 16:18:49.907 +07:00  DBG  Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2026-01-19 16:18:49.911 +07:00  DBG  Using key {8ded6968-7296-406f-847b-09157786742c} as the default key.
2026-01-19 16:18:49.913 +07:00  DBG  Key ring with default key {8ded6968-7296-406f-847b-09157786742c} was loaded during application startup.
2026-01-19 16:18:49.919 +07:00  DBG  Middleware loaded
2026-01-19 16:18:49.921 +07:00  DBG  Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16509 B).
2026-01-19 16:18:49.924 +07:00  DBG  Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2026-01-19 16:18:49.964 +07:00  WRN  The WebRootPath was not found: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee\wwwroot. Static files may be unavailable.
2026-01-19 16:18:50.001 +07:00  DBG  Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2026-01-19 16:18:50.043 +07:00  INF  Now listening on: http://[::]:5501
2026-01-19 16:18:50.043 +07:00  DBG  Loaded hosting startup assembly API-Employee
2026-01-19 16:18:50.044 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.ApiEndpointDiscovery
2026-01-19 16:18:50.045 +07:00  DBG  Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2026-01-19 16:18:50.046 +07:00  DBG  Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2026-01-19 16:18:50.156 +07:00  INF  Application started. Press Ctrl+C to shut down.
2026-01-19 16:18:50.158 +07:00  INF  Hosting environment: Development
2026-01-19 16:18:50.159 +07:00  INF  Content root path: D:\C# .Net Core\Project\Employee\API-Employee\API-Employee
2026-01-19 16:18:50.160 +07:00  DBG  Hosting started
2026-01-19 16:18:50.458 +07:00  DBG  Connection id "0HNIN7F11QP90" received FIN.
2026-01-19 16:18:50.466 +07:00  DBG  Connection id "0HNIN7F11QP90" accepted.
2026-01-19 16:18:50.468 +07:00  DBG  Connection id "0HNIN7F11QP90" started.
2026-01-19 16:18:50.477 +07:00  DBG  Connection id "0HNIN7F11QP90" sending FIN because: "The Socket transport's send loop completed gracefully."
2026-01-19 16:18:50.481 +07:00  DBG  Connection id "0HNIN7F11QP90" disconnecting.
2026-01-19 16:18:50.486 +07:00  DBG  Connection id "0HNIN7F11QP90" stopped.
2026-01-19 16:18:50.599 +07:00  DBG  Connection id "0HNIN7F11QP91" accepted.
2026-01-19 16:18:50.601 +07:00  DBG  Connection id "0HNIN7F11QP91" started.
2026-01-19 16:18:50.611 +07:00  DBG  Connection id "0HNIN7F11QP92" accepted.
2026-01-19 16:18:50.612 +07:00  DBG  Connection id "0HNIN7F11QP92" started.
2026-01-19 16:18:50.644 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/index.html - null null
2026-01-19 16:18:50.728 +07:00  DBG  Wildcard detected, all requests with hosts will be allowed.
2026-01-19 16:18:50.766 +07:00 739b8acb-73e2-442f-9a9c-5bf8e8d986cd DBG  No candidates found for the request path '/swagger/index.html'
2026-01-19 16:18:50.769 +07:00 739b8acb-73e2-442f-9a9c-5bf8e8d986cd DBG  Request did not match any endpoints
2026-01-19 16:18:50.772 +07:00 739b8acb-73e2-442f-9a9c-5bf8e8d986cd WRN  Failed to determine the https port for redirect.
2026-01-19 16:18:50.828 +07:00 739b8acb-73e2-442f-9a9c-5bf8e8d986cd DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 16:18:50.837 +07:00 739b8acb-73e2-442f-9a9c-5bf8e8d986cd DBG  The request path /swagger/index.html does not match an existing file
2026-01-19 16:18:50.883 +07:00 739b8acb-73e2-442f-9a9c-5bf8e8d986cd DBG  Response markup is scheduled to include Browser Link script injection.
2026-01-19 16:18:50.886 +07:00 739b8acb-73e2-442f-9a9c-5bf8e8d986cd DBG  Response markup is scheduled to include browser refresh script injection.
2026-01-19 16:18:50.898 +07:00  DBG  Response markup was updated to include Browser Link script injection.
2026-01-19 16:18:50.900 +07:00  DBG  Response markup was updated to include browser refresh script injection.
2026-01-19 16:18:50.902 +07:00  DBG  Connection id "0HNIN7F11QP91" completed keep alive response.
2026-01-19 16:18:50.904 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - null null
2026-01-19 16:18:50.907 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/index.html - 200 null text/html;charset=utf-8 271.2935ms
2026-01-19 16:18:50.909 +07:00  DBG  Script injected: /_framework/aspnetcore-browser-refresh.js
2026-01-19 16:18:50.912 +07:00  DBG  Connection id "0HNIN7F11QP92" completed keep alive response.
2026-01-19 16:18:50.912 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/_vs/browserLink - null null
2026-01-19 16:18:50.913 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 9.6745ms
2026-01-19 16:18:50.940 +07:00  DBG  Connection id "0HNIN7F11QP91" completed keep alive response.
2026-01-19 16:18:50.941 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.3616ms
2026-01-19 16:18:50.973 +07:00  INF  Request starting HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - null null
2026-01-19 16:18:50.976 +07:00 7dacc8a6-5a4e-4195-b947-b59c51b13233 DBG  No candidates found for the request path '/swagger/v1/swagger.json'
2026-01-19 16:18:50.978 +07:00 7dacc8a6-5a4e-4195-b947-b59c51b13233 DBG  Request did not match any endpoints
2026-01-19 16:18:50.981 +07:00 7dacc8a6-5a4e-4195-b947-b59c51b13233 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 16:18:50.983 +07:00 7dacc8a6-5a4e-4195-b947-b59c51b13233 DBG  The request path /swagger/v1/swagger.json does not match an existing file
2026-01-19 16:18:51.029 +07:00  DBG  Connection id "0HNIN7F11QP91" completed keep alive response.
2026-01-19 16:18:51.030 +07:00  INF  Request finished HTTP/1.1 GET http://localhost:5501/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 56.9663ms
2026-01-19 16:19:04.875 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - application/json 56
2026-01-19 16:19:04.890 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  1 candidate(s) found for the request path '/api/v1/Auth/sign-in'
2026-01-19 16:19:04.892 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)' with route pattern 'api/v{v:apiVersion}/Auth/sign-in' is valid for the request path '/api/v1/Auth/sign-in'
2026-01-19 16:19:04.897 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 16:19:04.900 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 16:19:04.902 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  CORS policy execution successful.
2026-01-19 16:19:04.906 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 16:19:04.908 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 16:19:04.910 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 16:19:04.911 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 16:19:04.931 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  Route matched with {action = "SignIn", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SignIn(Application.CQRS.Commands.Auth.SignIn.SignInCommand) on controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee).
2026-01-19 16:19:04.934 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 16:19:04.936 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 16:19:04.938 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 16:19:04.940 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 16:19:04.941 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 16:19:04.945 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 16:19:04.949 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a WRN  You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2026-01-19 16:19:04.951 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.AuthController (API-Employee)
2026-01-19 16:19:04.956 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 16:19:04.960 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' using the name '' in request data ...
2026-01-19 16:19:04.964 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 16:19:04.973 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Connection id "0HNIN7F11QP91", Request id "0HNIN7F11QP91:00000004": started reading request body.
2026-01-19 16:19:04.975 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Connection id "0HNIN7F11QP91", Request id "0HNIN7F11QP91:00000004": done reading request body.
2026-01-19 16:19:04.986 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'
2026-01-19 16:19:04.988 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 16:19:04.989 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 16:19:04.991 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand' ...
2026-01-19 16:19:04.995 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.SignIn.SignInCommand'.
2026-01-19 16:19:05.023 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  CQRS Handling SignInCommand | Payload: {"Username":"tanh624","Password":"tanh@123456","$type":"SignInCommand"}
2026-01-19 16:19:05.074 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 16:19:05.087 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Compiling query expression: 
'DbSet<AppUser>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2026-01-19 16:19:05.142 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<AppUser>(
    asyncEnumerable: SingleQueryingEnumerable.Create<AppUser>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: AppUser.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: AppUser.AccessFailedCount (int) Required, 1], [Property: AppUser.ConcurrencyStamp (string) Concurrency, 2], [Property: AppUser.CreatedAt (DateTime?), 3], [Property: AppUser.DateBirth (DateTime?), 4], [Property: AppUser.Email (string) MaxLength(256), 5], [Property: AppUser.EmailConfirmed (bool) Required, 6], [Property: AppUser.FirstName (string), 7], [Property: AppUser.LastName (string), 8], [Property: AppUser.LockoutEnabled (bool) Required, 9], [Property: AppUser.LockoutEnd (DateTimeOffset?), 10], [Property: AppUser.NormalizedEmail (string) Index MaxLength(256), 11], [Property: AppUser.NormalizedUserName (string) Index MaxLength(256), 12], [Property: AppUser.PasswordHash (string), 13], [Property: AppUser.PhoneNumber (string), 14], [Property: AppUser.PhoneNumberConfirmed (bool) Required, 15], [Property: AppUser.SecurityStamp (string), 16], [Property: AppUser.TwoFactorEnabled (bool) Required, 17], [Property: AppUser.UpdatedAt (DateTime?), 18], [Property: AppUser.UserName (string) MaxLength(256), 19] }
            SELECT TOP(1) a.Id, a.AccessFailedCount, a.ConcurrencyStamp, a.CreatedAt, a.DateBirth, a.Email, a.EmailConfirmed, a.FirstName, a.LastName, a.LockoutEnabled, a.LockoutEnd, a.NormalizedEmail, a.NormalizedUserName, a.PasswordHash, a.PhoneNumber, a.PhoneNumberConfirmed, a.SecurityStamp, a.TwoFactorEnabled, a.UpdatedAt, a.UserName
            FROM AspNetUsers AS a
            WHERE a.NormalizedUserName == @__normalizedUserName_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            AppUser entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                AppUser instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(AppUser);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: AppUser.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Identity.AppUser").FindPrimaryKey()], 
                    keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (AppUser)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]: 
                            {
                                return 
                                {
                                    AppUser instance;
                                    instance = new AppUser();
                                    instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                    instance.<AccessFailedCount>k__BackingField = dataReader.GetInt32(1);
                                    instance.<ConcurrencyStamp>k__BackingField = dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2);
                                    instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(3) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(3);
                                    instance.<DateBirth>k__BackingField = dataReader.IsDBNull(4) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(4);
                                    instance.<Email>k__BackingField = dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5);
                                    instance.<EmailConfirmed>k__BackingField = dataReader.GetBoolean(6);
                                    instance.<FirstName>k__BackingField = dataReader.IsDBNull(7) ? default(string) : dataReader.GetString(7);
                                    instance.<LastName>k__BackingField = dataReader.IsDBNull(8) ? default(string) : dataReader.GetString(8);
                                    instance.<LockoutEnabled>k__BackingField = dataReader.GetBoolean(9);
                                    instance.<LockoutEnd>k__BackingField = dataReader.IsDBNull(10) ? default(DateTimeOffset?) : (DateTimeOffset?)dataReader.GetFieldValue<DateTimeOffset>(10);
                                    instance.<NormalizedEmail>k__BackingField = dataReader.IsDBNull(11) ? default(string) : dataReader.GetString(11);
                                    instance.<NormalizedUserName>k__BackingField = dataReader.IsDBNull(12) ? default(string) : dataReader.GetString(12);
                                    instance.<PasswordHash>k__BackingField = dataReader.IsDBNull(13) ? default(string) : dataReader.GetString(13);
                                    instance.<PhoneNumber>k__BackingField = dataReader.IsDBNull(14) ? default(string) : dataReader.GetString(14);
                                    instance.<PhoneNumberConfirmed>k__BackingField = dataReader.GetBoolean(15);
                                    instance.<SecurityStamp>k__BackingField = dataReader.IsDBNull(16) ? default(string) : dataReader.GetString(16);
                                    instance.<TwoFactorEnabled>k__BackingField = dataReader.GetBoolean(17);
                                    instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(18) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(18);
                                    instance.<UserName>k__BackingField = dataReader.IsDBNull(19) ? default(string) : dataReader.GetString(19);
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: AppUser | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Identity.AppUser")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(AppUser)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: Infrastructure.Persistence.DatabaseContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: False, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)'
2026-01-19 16:19:05.171 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Creating DbConnection.
2026-01-19 16:19:05.173 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Created DbConnection. (1ms).
2026-01-19 16:19:05.175 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.178 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.181 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 16:19:05.182 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 16:19:05.186 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Initialized DbCommand for 'ExecuteReader' (5ms).
2026-01-19 16:19:05.190 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 16:19:05.225 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  Executed DbCommand (37ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[CreatedAt], [a].[DateBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UpdatedAt], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2026-01-19 16:19:05.258 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Context 'DatabaseContext' started tracking 'AppUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 16:19:05.303 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.306 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 77ms reading results.
2026-01-19 16:19:05.310 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.311 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 16:19:05.391 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Compiling query expression: 
'DbSet<AppUserRole>()
    .Join(
        inner: DbSet<AppRole>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2026-01-19 16:19:05.427 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<string>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT a0.Name
        FROM AspNetUserRoles AS a
        INNER JOIN AspNetRoles AS a0 ON a.RoleId == a0.Id
        WHERE a.UserId == @__userId_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        value1 = dataReader.IsDBNull(0) ? default(string) : dataReader.GetString(0);
        return value1;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)'
2026-01-19 16:19:05.432 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.434 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.435 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 16:19:05.436 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 16:19:05.437 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 16:19:05.438 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 16:19:05.444 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2026-01-19 16:19:05.447 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.448 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 2ms reading results.
2026-01-19 16:19:05.450 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.452 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 16:19:05.500 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  'DatabaseContext' generated a value for the property 'UserRefreshToken.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 16:19:05.522 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Context 'DatabaseContext' started tracking 'UserRefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 16:19:05.528 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 16:19:05.556 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 16:19:05.561 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  SaveChanges starting for 'DatabaseContext'.
2026-01-19 16:19:05.564 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 16:19:05.566 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 16:19:05.617 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.618 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.622 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 16:19:05.624 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Created DbCommand for 'ExecuteReader' (2ms).
2026-01-19 16:19:05.626 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Initialized DbCommand for 'ExecuteReader' (3ms).
2026-01-19 16:19:05.628 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (Size = 1000) (DbType = AnsiString), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([Id], [AccessToken], [CreatedAt], [ExpiryTime], [IsRevoked], [IsUsed], [RefreshToken], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-19 16:19:05.644 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Boolean), @p5='?' (DbType = Boolean), @p6='?' (Size = 1000) (DbType = AnsiString), @p7='?' (DbType = DateTime2), @p8='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([Id], [AccessToken], [CreatedAt], [ExpiryTime], [IsRevoked], [IsUsed], [RefreshToken], [UpdatedAt], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2026-01-19 16:19:05.649 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.651 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 3ms reading results.
2026-01-19 16:19:05.653 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.654 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 16:19:05.663 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 16:19:05.666 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  SaveChanges completed for 'DatabaseContext' with 1 entities written to the database.
2026-01-19 16:19:05.668 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  CQRS Handled SignInCommand in 646ms
2026-01-19 16:19:05.674 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-19 16:19:05.679 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-01-19 16:19:05.682 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-01-19 16:19:05.683 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-19 16:19:05.684 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-19 16:19:05.685 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-19 16:19:05.687 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  Executing OkObjectResult, writing value of type 'Application.Common.ApiResult`1[[Application.CQRS.DTOs.Auth.SignInDTO, Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2026-01-19 16:19:05.700 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  Executed action API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee) in 753.6507ms
2026-01-19 16:19:05.701 +07:00 811ee8d5-6748-4a33-866a-a3498f3f203a INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.AuthController.SignIn (API-Employee)'
2026-01-19 16:19:05.704 +07:00  DBG  Connection id "0HNIN7F11QP91" completed keep alive response.
2026-01-19 16:19:05.706 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 16:19:05.709 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:05.710 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 16:19:05.713 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Auth/sign-in - 200 null application/json; charset=utf-8 837.9589ms
2026-01-19 16:19:19.829 +07:00  INF  Request starting HTTP/1.1 POST http://localhost:5501/api/v1/Token/revoke - application/json 88
2026-01-19 16:19:19.834 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  1 candidate(s) found for the request path '/api/v1/Token/revoke'
2026-01-19 16:19:19.835 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)' with route pattern 'api/v{v:apiVersion}/Token/revoke' is valid for the request path '/api/v1/Token/revoke'
2026-01-19 16:19:19.837 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Request matched endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)'
2026-01-19 16:19:19.838 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  The request has an origin header: 'http://localhost:5501'.
2026-01-19 16:19:19.840 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  CORS policy execution successful.
2026-01-19 16:19:19.840 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  AuthenticationScheme: Bearer was not authenticated.
2026-01-19 16:19:19.841 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 16:19:19.842 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Static files was skipped as the request already matched an endpoint.
2026-01-19 16:19:19.842 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  Executing endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)'
2026-01-19 16:19:19.847 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  Route matched with {action = "RevokeToken", controller = "Token"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RevokeToken(Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand) on controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee).
2026-01-19 16:19:19.849 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Execution plan of authorization filters (in the following order): ["None"]
2026-01-19 16:19:19.850 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Execution plan of resource filters (in the following order): ["None"]
2026-01-19 16:19:19.851 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 16:19:19.854 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Execution plan of exception filters (in the following order): ["None"]
2026-01-19 16:19:19.855 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2026-01-19 16:19:19.856 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Executing controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 16:19:19.858 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Executed controller factory for controller API_Employee.Controllers.V1.Auth.TokenController (API-Employee)
2026-01-19 16:19:19.860 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand' ...
2026-01-19 16:19:19.861 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand' using the name '' in request data ...
2026-01-19 16:19:19.863 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2026-01-19 16:19:19.864 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Connection id "0HNIN7F11QP91", Request id "0HNIN7F11QP91:00000005": started reading request body.
2026-01-19 16:19:19.865 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Connection id "0HNIN7F11QP91", Request id "0HNIN7F11QP91:00000005": done reading request body.
2026-01-19 16:19:19.867 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  JSON input formatter succeeded, deserializing to type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'
2026-01-19 16:19:19.869 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'.
2026-01-19 16:19:19.870 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Done attempting to bind parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'.
2026-01-19 16:19:19.871 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand' ...
2026-01-19 16:19:19.872 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Done attempting to validate the bound parameter 'command' of type 'Application.CQRS.Commands.Auth.RevokeToken.RevokeTokenCommand'.
2026-01-19 16:19:19.878 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  CQRS Handling RevokeTokenCommand | Payload: {"RefreshToken":"O2CJHCVXNY4IZ5O7JPG29QWAHO09WBB0TMWP9D0UXTLOQHIXAXGRJK04AFEVXLPQ","$type":"RevokeTokenCommand"}
2026-01-19 16:19:19.891 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Entity Framework Core 9.0.1 initialized 'DatabaseContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:9.0.1' with options: MigrationsAssembly=Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null EngineType=SqlServer 
2026-01-19 16:19:19.897 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Compiling query expression: 
'DbSet<UserRefreshToken>()
    .Where(x => x.RefreshToken == __request_RefreshToken_0)
    .FirstOrDefault()'
2026-01-19 16:19:19.903 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Generated query execution expression: 
'queryContext => SingleQueryingEnumerable.Create<UserRefreshToken>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE u.RefreshToken == @__request_RefreshToken_0) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: UserRefreshToken.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: UserRefreshToken.AccessToken (string) Required, 1], [Property: UserRefreshToken.CreatedAt (DateTime?), 2], [Property: UserRefreshToken.ExpiryTime (DateTime) Required, 3], [Property: UserRefreshToken.IsRevoked (bool) Required, 4], [Property: UserRefreshToken.IsUsed (bool) Required, 5], [Property: UserRefreshToken.RefreshToken (string) Required, 6], [Property: UserRefreshToken.UpdatedAt (DateTime?), 7], [Property: UserRefreshToken.UserId (string) Required, 8] }
        SELECT TOP(1) u.Id, u.AccessToken, u.CreatedAt, u.ExpiryTime, u.IsRevoked, u.IsUsed, u.RefreshToken, u.UpdatedAt, u.UserId
        FROM UserRefreshTokens AS u
        WHERE u.RefreshToken == @__request_RefreshToken_0, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        UserRefreshToken entity;
        entity = 
        {
            MaterializationContext materializationContext1;
            IEntityType entityType1;
            UserRefreshToken instance1;
            InternalEntityEntry entry1;
            bool hasNullKey1;
            materializationContext1 = new MaterializationContext(
                [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                queryContext.Context
            );
            instance1 = default(UserRefreshToken);
            entry1 = queryContext.TryGetEntry(
                key: [LIFTABLE Constant: Key: UserRefreshToken.Id PK | Resolver: c => c.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken").FindPrimaryKey()], 
                keyValues: new object[]{ (object)dataReader.GetGuid(0) }, 
                throwOnNullKey: True, 
                hasNullKey: hasNullKey1);
            !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
            {
                entityType1 = entry1.EntityType;
                return instance1 = (UserRefreshToken)entry1.Entity;
            } : 
            {
                ISnapshot shadowSnapshot1;
                shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                entityType1 = [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")];
                instance1 = switch (entityType1)
                {
                    case [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]: 
                        {
                            return 
                            {
                                UserRefreshToken instance;
                                instance = new UserRefreshToken();
                                instance.<Id>k__BackingField = dataReader.GetGuid(0);
                                instance.<AccessToken>k__BackingField = dataReader.GetString(1);
                                instance.<CreatedAt>k__BackingField = dataReader.IsDBNull(2) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(2);
                                instance.<ExpiryTime>k__BackingField = dataReader.GetDateTime(3);
                                instance.<IsRevoked>k__BackingField = dataReader.GetBoolean(4);
                                instance.<IsUsed>k__BackingField = dataReader.GetBoolean(5);
                                instance.<RefreshToken>k__BackingField = dataReader.GetString(6);
                                instance.<UpdatedAt>k__BackingField = dataReader.IsDBNull(7) ? default(DateTime?) : (DateTime?)dataReader.GetDateTime(7);
                                instance.<UserId>k__BackingField = dataReader.GetString(8);
                                (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                    context: materializationContext1.Context, 
                                    entity: instance, 
                                    queryTrackingBehavior: TrackAll, 
                                    structuralType: [LIFTABLE Constant: EntityType: UserRefreshToken | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType("Domain.Entities.UserRefreshToken")]) : default(void);
                                return instance;
                            }}
                    default: 
                        default(UserRefreshToken)
                }
                ;
                entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                    entityType: entityType1, 
                    entity: instance1, 
                    snapshot: shadowSnapshot1);
                return instance1;
            } : default(void);
            return instance1;
        };
        return entity;
    }, 
    contextType: Infrastructure.Persistence.DatabaseContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: False, 
    threadSafetyChecksEnabled: True)
    .SingleOrDefault()'
2026-01-19 16:19:19.916 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Creating DbConnection.
2026-01-19 16:19:19.917 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Created DbConnection. (0ms).
2026-01-19 16:19:19.918 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:19.919 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:19.920 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 16:19:19.921 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Created DbCommand for 'ExecuteReader' (0ms).
2026-01-19 16:19:19.922 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 16:19:19.923 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Executing DbCommand [Parameters=[@__request_RefreshToken_0='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[RefreshToken] = @__request_RefreshToken_0
2026-01-19 16:19:19.926 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  Executed DbCommand (3ms) [Parameters=[@__request_RefreshToken_0='?' (Size = 1000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessToken], [u].[CreatedAt], [u].[ExpiryTime], [u].[IsRevoked], [u].[IsUsed], [u].[RefreshToken], [u].[UpdatedAt], [u].[UserId]
FROM [UserRefreshTokens] AS [u]
WHERE [u].[RefreshToken] = @__request_RefreshToken_0
2026-01-19 16:19:19.930 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Context 'DatabaseContext' started tracking 'UserRefreshToken' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 16:19:19.932 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:19.933 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 4ms reading results.
2026-01-19 16:19:19.935 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:19.937 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 16:19:19.940 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 16:19:19.942 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 16:19:19.944 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 16:19:19.945 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  SaveChanges starting for 'DatabaseContext'.
2026-01-19 16:19:19.946 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  DetectChanges starting for 'DatabaseContext'.
2026-01-19 16:19:19.947 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  DetectChanges completed for 'DatabaseContext'.
2026-01-19 16:19:19.954 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Opening connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:19.955 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Opened connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:19.956 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Creating DbCommand for 'ExecuteReader'.
2026-01-19 16:19:19.958 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Created DbCommand for 'ExecuteReader' (1ms).
2026-01-19 16:19:19.959 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Initialized DbCommand for 'ExecuteReader' (2ms).
2026-01-19 16:19:19.961 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Executing DbCommand [Parameters=[@p8='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 1000) (DbType = AnsiString), @p6='?' (DbType = DateTime2), @p7='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserRefreshTokens] SET [AccessToken] = @p0, [CreatedAt] = @p1, [ExpiryTime] = @p2, [IsRevoked] = @p3, [IsUsed] = @p4, [RefreshToken] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2026-01-19 16:19:19.971 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  Executed DbCommand (10ms) [Parameters=[@p8='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (Size = 1000) (DbType = AnsiString), @p6='?' (DbType = DateTime2), @p7='?' (Size = 50) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserRefreshTokens] SET [AccessToken] = @p0, [CreatedAt] = @p1, [ExpiryTime] = @p2, [IsRevoked] = @p3, [IsUsed] = @p4, [RefreshToken] = @p5, [UpdatedAt] = @p6, [UserId] = @p7
OUTPUT 1
WHERE [Id] = @p8;
2026-01-19 16:19:19.978 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Closing data reader to 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:19.980 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  A data reader for 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' is being disposed after spending 5ms reading results.
2026-01-19 16:19:19.981 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Closing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:19.983 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Closed connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS' (1ms).
2026-01-19 16:19:19.985 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  An entity of type 'UserRefreshToken' tracked by 'DatabaseContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2026-01-19 16:19:19.987 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  SaveChanges completed for 'DatabaseContext' with 1 entities written to the database.
2026-01-19 16:19:19.989 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  CQRS Handled RevokeTokenCommand in 111ms
2026-01-19 16:19:19.991 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2026-01-19 16:19:19.994 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Attempting to select an output formatter based on Accept header '["text/plain"]'.
2026-01-19 16:19:19.995 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2026-01-19 16:19:19.997 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2026-01-19 16:19:19.998 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Attempting to select the first formatter in the output formatters list which can write the result.
2026-01-19 16:19:19.999 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 DBG  Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2026-01-19 16:19:20.000 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  Executing OkObjectResult, writing value of type 'Application.Common.ApiResult`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2026-01-19 16:19:20.003 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  Executed action API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee) in 146.9234ms
2026-01-19 16:19:20.005 +07:00 b3f17380-5a22-4149-b69f-a27cddf72982 INF  Executed endpoint 'API_Employee.Controllers.V1.Auth.TokenController.RevokeToken (API-Employee)'
2026-01-19 16:19:20.006 +07:00  DBG  Connection id "0HNIN7F11QP91" completed keep alive response.
2026-01-19 16:19:20.008 +07:00  DBG  'DatabaseContext' disposed.
2026-01-19 16:19:20.009 +07:00  DBG  Disposing connection to database 'EmplApi' on server 'DESKTOP-D1TJ1DB\SQLEXPRESS'.
2026-01-19 16:19:20.010 +07:00  DBG  Disposed connection to database '' on server '' (1ms).
2026-01-19 16:19:20.012 +07:00  INF  Request finished HTTP/1.1 POST http://localhost:5501/api/v1/Token/revoke - 200 null application/json; charset=utf-8 183.2581ms
